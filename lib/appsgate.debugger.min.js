//     AppsGate.Debugger v1.0.3

//
//     Copyright (c)2014 RÃ©mi Barraquand.
//     Distributed under ISC license


!function(a,b){"function"==typeof define&&define.amd?define(["backbone","jquery","underscore","d3","i18n","exports"],function(c,d,e,f,g,h){return a.AppsGateDebugger=b(a,h,c,d,e,f,g)}):a.AppsGateDebugger=b(a,{},a.Backbone,a.$,a._,a.d3,a.i18n)}(this,function(root,Debugger,Backbone,$,_,d3,i18n){"use strict";function throwError(a,b){var c=new Error(_.template(a,b||{},{interpolate:/\#\{(.+?)\}/g}));throw c.name="Error",c}function sluggify(a){return String(a).toLowerCase().replace(RegExp(" ","g"),"-").replace(/[^\w-]+/g,"")}function parseBoolean(a){return/^true$/i.test(a)}function ensure(a,b){for(var c=b.split(".");c.length;){var d=c.shift();if(!_.isObject(a)||!a.hasOwnProperty(d)||_.isEmpty(a[d]))return!1;a=a[d]}return 2==arguments.length?!0:a===_.last(arguments)}function missing(a,b){return!ensure(a,b)}var previousDebugger=root.AppsGateDebugger;Debugger.VERSION="1.0.3",Debugger.noConflict=function(){return root.AppsGateDebugger=previousDebugger,this},Debugger.extend=Backbone.Model.extend;var BASE_SVG='<svg xmlns="http://www.w3.org/2000/svg"><defs><g id="colorlight_state_off"><g transform="matrix(.18519 0 0 .18519-12.778-148.7)"><path fill="#f9f9f9" d="m122 847c0 4.971-4.03 9-9 9h-34c-4.971 0-9-4.03-9-9v-34c0-4.971 4.03-9 9-9h34c4.971 0 9 4.03 9 9v34"/><path d="m122 847c0 4.971-4.03 9-9 9h-34c-4.971 0-9-4.03-9-9v-34c0-4.971 4.03-9 9-9h34c4.971 0 9 4.03 9 9v34z" stroke="#f8c500" stroke-miterlimit="10" stroke-width="2" fill="none"/></g><path opacity=".62" fill="#fff" d="m5.88 6.185l.018-.796c.127-.099.243-.219.338-.36.47-.7.291-1.644-.399-2.107-.69-.463-1.631-.27-2.101.431-.47.7-.292 1.644.399 2.106.005.003.011.006.015.009l-.015.703 1.745.014"/><path d="m5.675 6.489l-1.365.011c-.077.001-.115-.053-.116-.114 0-.061.037-.115.114-.116l1.365-.011c.077-.001.115.053.116.114 0 .061-.036.115-.114.116m-.689-4.089c.907-.007 1.646.72 1.653 1.624.004.462-.187.883-.494 1.183-.096.117-.152.267-.167.688-.004.101-.078.149-.157.146-.079-.003-.149-.056-.146-.157.017-.446.082-.684.249-.883.253-.245.415-.595.412-.974-.005-.737-.608-1.33-1.348-1.324-.737.006-1.33.608-1.324 1.345.003.379.171.727.427.968.17.196.239.433.262.879.005.101-.064.155-.143.159-.079.004-.154-.042-.159-.143-.022-.421-.08-.569-.178-.685-.312-.295-.509-.714-.512-1.175-.007-.904.72-1.643 1.625-1.65m.691 4.467l-1.365.011c-.077.001-.115-.052-.116-.114 0-.061.037-.115.114-.116l1.365-.011c.077-.001.115.052.116.114 0 .061-.036.115-.114.116m-.145.379l-1.07.009c-.077.001-.115-.053-.116-.114 0-.061.036-.115.114-.116l1.07-.008c.077-.001.115.052.115.114.001.062-.036.115-.114.116m-.162.156c-.056.124-.201.213-.372.214-.171.001-.317-.085-.375-.208l.746-.006" fill="#605f5f"/><path stroke-miterlimit="10" d="m1.346 1.989h1.296" fill="none" stroke="#605f5f" stroke-width=".37"/></g><g id="colorlight_state_on"><g transform="matrix(.18519 0 0 .18519-24.26-148.7)"><path d="m184 847c0 4.971-4.03 9-9 9h-34c-4.971 0-9-4.03-9-9v-34c0-4.971 4.03-9 9-9h34c4.971 0 9 4.03 9 9v34z" stroke="#f8c500" stroke-miterlimit="10" stroke-width="2" fill="none"/><path d="m161.64 838l-7.371.059c-.416.003-.621-.284-.625-.616-.002-.331.199-.621.615-.624l7.371-.059c.418-.003.621.285.625.616.002.331-.197.622-.615.624m-3.719-22.08c4.9-.038 8.889 3.89 8.928 8.772.02 2.494-1.01 4.769-2.666 6.389-.518.634-.82 1.44-.902 3.714-.021.548-.422.803-.848.787-.426-.016-.807-.3-.787-.848.09-2.408.441-3.695 1.342-4.768 1.365-1.322 2.242-3.213 2.225-5.262-.029-3.98-3.281-7.182-7.281-7.15-3.98.031-7.18 3.283-7.15 7.264.018 2.047.922 3.924 2.307 5.225.918 1.059 1.291 2.34 1.416 4.747.029.547-.348.837-.773.858-.424.023-.83-.227-.857-.772-.119-2.272-.434-3.073-.961-3.699-1.684-1.595-2.746-3.853-2.766-6.347-.039-4.883 3.89-8.871 8.773-8.91m3.734 24.11l-7.371.058c-.416.003-.621-.283-.625-.615-.002-.331.199-.622.615-.625l7.371-.057c.418-.004.621.282.625.614.003.332-.197.623-.615.625m-.781 2.045l-5.777.046c-.418.003-.621-.284-.625-.615-.002-.332.197-.622.615-.626l5.779-.044c.416-.003.621.283.623.614.004.333-.197.623-.615.625m-.877.844c-.305.67-1.088 1.149-2.01 1.156-.922.008-1.713-.46-2.027-1.125l4.03-.031" fill="#605f5f"/><circle cy="815.73" cx="142.73" r="6.397" transform="translate(-.964-2.029)" fill="#f8c500"/></g></g><g id="colorlight_type"><path opacity=".62" fill="#fff" d="m5.88 6.185l.018-.796c.127-.099.243-.219.338-.36.47-.7.291-1.644-.399-2.107-.69-.463-1.631-.27-2.101.431-.47.7-.292 1.644.399 2.106.005.003.011.006.015.009l-.015.703 1.745.014"/><path fill="#605f5f" d="m99.52 841.39l-7.371.059c-.416.003-.621-.284-.625-.616-.002-.331.199-.621.615-.624l7.371-.059c.418-.003.621.285.625.616.002.331-.197.622-.615.624m-3.719-22.08c4.9-.038 8.889 3.89 8.928 8.772.02 2.494-1.01 4.769-2.666 6.389-.518.634-.82 1.44-.902 3.714-.021.548-.422.803-.848.787s-.807-.3-.787-.848c.09-2.408.441-3.695 1.342-4.768 1.365-1.322 2.242-3.213 2.225-5.262-.029-3.98-3.281-7.182-7.281-7.15-3.98.031-7.18 3.283-7.15 7.264.018 2.047.922 3.924 2.307 5.225.918 1.059 1.291 2.34 1.416 4.747.029.547-.348.837-.773.858-.424.023-.83-.227-.857-.772-.119-2.272-.434-3.073-.961-3.699-1.684-1.595-2.746-3.853-2.766-6.347-.04-4.882 3.89-8.871 8.773-8.91m3.734 24.12l-7.371.058c-.416.003-.621-.283-.625-.615-.002-.331.199-.622.615-.625l7.371-.057c.418-.004.621.282.625.614.002.332-.197.623-.615.625m-.781 2.045l-5.777.046c-.418.003-.621-.284-.625-.615-.002-.332.197-.622.615-.626l5.779-.044c.416-.003.621.283.623.614.004.333-.197.623-.615.625m-.877.843c-.305.67-1.088 1.149-2.01 1.156-.922.008-1.713-.46-2.027-1.125l4.03-.031" transform="matrix(.18519 0 0 .18519-12.778-148.7)"/></g><g id="connection"><g transform="matrix(.15994 0 0 .15994 1.197-108.4)" fill="#9acf00"><path d="m27.57 704.8c.49-.699.329-1.663-.367-2.153l-.23-.161c-.691-.491-1.658-.321-2.148.38l-24.54 34.821c-.492.7-.33 1.665.367 2.154l.228.162c.695.489 1.658.318 2.151-.383l24.539-34.82"/><path d="m27.598 692.96l7.665-10.878c.976-1.387.972-3.085-.026-3.786l-.336-.224c-.986-.708-2.593-.146-3.57 1.244l-7.496 10.639"/><path d="m39.17 700.79l7.664-10.876c.975-1.388.972-3.086-.026-3.788l-.334-.224c-.987-.706-2.594-.144-3.57 1.247l-7.496 10.637"/><path d="m39.27 694.64l-9.262-6.166"/><path d="m25.379 685.39l-3.872-2.578-7.877 11.836c-3 4.516-1.905 10.713 2.289 14.988l-1.329 3.892 7.235 4.814 3.314-2.613c5.521 2.122 11.563.726 14.541-3.745l7.878-11.835-3.655-2.431"/></g></g><g id="contact_state_off"><g transform="matrix(.16949 0 0 .16949-63.898-41.36)"><path d="m435 293c0 4.971-4.03 9-9 9h-39c-4.971 0-9-4.03-9-9v-39c0-4.971 4.03-9 9-9h39c4.971 0 9 4.03 9 9v39" fill="#f9f9f9"/><path d="m435 293c0 4.971-4.03 9-9 9h-39c-4.971 0-9-4.03-9-9v-39c0-4.971 4.03-9 9-9h39c4.971 0 9 4.03 9 9v39z" stroke="#f8c500" stroke-miterlimit="10" stroke-width="2" fill="none"/></g><g fill="#a0a0a0"><path d="m429 286.16c0 1.56-1.275 2.835-2.835 2.835h-37.33c-1.56 0-2.835-1.275-2.835-2.835v-5.33c0-1.56 1.275-2.835 2.835-2.835h37.33c1.56 0 2.835 1.275 2.835 2.835v5.33" transform="matrix(.16949 0 0 .16949-64.07-41.36)"/><path d="m5.238.645h2.203v.508h-2.203z" transform="matrix(.94274.33352-.33352.94274-.169 0)"/></g></g><g id="contact_state_on"><g transform="matrix(.16949 0 0 .16949-10.508-40.847)"><path fill="#f9f9f9" d="m120 290c0 4.971-4.03 9-9 9h-39c-4.971 0-9-4.03-9-9v-39c0-4.971 4.03-9 9-9h39c4.971 0 9 4.03 9 9v39"/><path d="m120 290c0 4.971-4.03 9-9 9h-39c-4.971 0-9-4.03-9-9v-39c0-4.971 4.03-9 9-9h39c4.971 0 9 4.03 9 9v39z" stroke="#f8c500" stroke-miterlimit="10" stroke-width="2" fill="none"/></g><g transform="translate(-.171)" fill="#a0a0a0"><path d="m114 281.16c0 1.56-1.275 2.835-2.835 2.835h-37.32c-1.56 0-2.835-1.28-2.835-2.84v-5.33c0-1.55 1.275-2.83 2.835-2.83h37.33c1.56 0 2.835 1.275 2.835 2.835v5.33z" transform="matrix(.16949 0 0 .16949-10.508-40.847)"/><path d="m3.898 4.746h2.203v.508h-2.203z"/></g></g><g id="contact_type"><g transform="translate(-.17)" fill="#a0a0a0"><path d="m114 281.16c0 1.56-1.275 2.835-2.835 2.835h-37.33c-1.56 0-2.835-1.28-2.835-2.84v-5.33c0-1.55 1.275-2.83 2.835-2.83h37.33c1.56 0 2.835 1.275 2.835 2.835v5.33" transform="matrix(.16949 0 0 .16949-10.508-40.847)"/><path d="m3.898 4.746h2.203v.508h-2.203z"/></g></g><g id="disconnection"><g transform="matrix(.15994 0 0 .15994 1.197 0)" fill="#ce4242"><path d="m27.57 27.04c.491-.699.329-1.663-.367-2.153l-.23-.161c-.691-.491-1.658-.321-2.148.38l-24.541 34.822c-.492.7-.33 1.665.367 2.154l.228.162c.695.489 1.658.318 2.151-.383l24.54-34.821" stroke-width=".6"/><path d="m27.598 15.194l7.665-10.878c.975-1.387.971-3.085-.027-3.786l-.336-.224c-.986-.708-2.593-.146-3.57 1.244l-7.497 10.639"/><path d="m39.17 23.03l7.664-10.876c.975-1.388.971-3.086-.026-3.788l-.334-.224c-.988-.706-2.594-.144-3.571 1.246l-7.496 10.637"/><path d="m39.27 16.879l-9.262-6.166"/><path d="m25.378 7.633l-3.872-2.578-7.876 11.836c-3.01 4.516-1.905 10.713 2.289 14.988l-1.329 3.892 7.235 4.814 3.314-2.613c5.521 2.122 11.564.726 14.541-3.745l7.878-11.835-3.655-2.431"/></g></g><g id="domicube_state_1"><g transform="translate(0-1042.36)"><path fill="none" stroke="#000" stroke-linejoin="round" d="m.733 1043.09h8.535v8.54h-8.535z"/><text x="2.058" y="1050.64" font-family="Sans" word-spacing="0" line-height="125%" letter-spacing="0" font-size="9"><tspan x="2.058" y="1050.64">1</tspan></text></g></g><g id="domicube_state_2"><g transform="translate(0-1042.36)"><path fill="none" stroke="#000" stroke-linejoin="round" d="m.733 1043.09h8.535v8.54h-8.535z"/><text x="2.058" y="1050.64" font-family="Sans" word-spacing="0" line-height="125%" letter-spacing="0" font-size="9"><tspan x="2.058" y="1050.64">2</tspan></text></g></g><g id="domicube_state_3"><g transform="translate(0-1042.36)"><path fill="none" stroke="#000" stroke-linejoin="round" d="m.733 1043.09h8.535v8.54h-8.535z"/><text x="2.058" y="1050.64" font-family="Sans" word-spacing="0" line-height="125%" letter-spacing="0" font-size="9"><tspan x="2.058" y="1050.64">3</tspan></text></g></g><g id="domicube_state_4"><g transform="translate(0-1042.36)"><path fill="none" stroke="#000" stroke-linejoin="round" d="m.733 1043.09h8.535v8.54h-8.535z"/><text x="2.058" y="1050.64" font-family="Sans" word-spacing="0" line-height="125%" letter-spacing="0" font-size="9"><tspan x="2.058" y="1050.64">4</tspan></text></g></g><g id="domicube_state_5"><g transform="translate(0-1042.36)"><path fill="none" stroke="#000" stroke-linejoin="round" d="m.733 1043.09h8.535v8.54h-8.535z"/><text x="2.058" y="1050.64" font-family="Sans" word-spacing="0" line-height="125%" letter-spacing="0" font-size="9"><tspan x="2.058" y="1050.64">5</tspan></text></g></g><g id="domicube_state_6"><g transform="translate(0-1042.36)"><path fill="none" stroke="#000" stroke-linejoin="round" d="m.733 1043.09h8.535v8.54h-8.535z"/><text x="2.058" y="1050.64" font-family="Sans" word-spacing="0" line-height="125%" letter-spacing="0" font-size="9"><tspan x="2.058" y="1050.64">6</tspan></text></g></g><g id="domicube_state_off"><g transform="translate(0-1042.36)"><g transform="matrix(.17241 0 0 .17241-24.482 1028.05)"><path d="m199 131c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38" fill="#f9f9f9"/><path stroke-miterlimit="10" d="m199 131c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38z" fill="none" stroke="#f8c500" stroke-width="2"/></g><g fill="none" stroke="#605f5f"><path d="m3.21 1045.57h3.581v3.581h-3.581z" stroke-linejoin="round" stroke-width=".419"/><path stroke-miterlimit="10" d="m1.346 1044.35h1.296" stroke-width=".37"/></g></g></g><g id="domicube_state_on"><g transform="translate(0-1042.36)"><g transform="matrix(.17241 0 0 .17241-24.482 1028.05)"><path d="m199 131c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38" fill="#f9f9f9"/><path stroke-miterlimit="10" d="m199 131c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38z" fill="none" stroke="#f8c500" stroke-width="2"/></g><path d="m3.21 1045.57h3.581v3.581h-3.581z" fill="none" stroke="#605f5f" stroke-linejoin="round" stroke-width=".419"/><circle r="6.397" stroke-miterlimit="10" cy="891.73" cx="437.73" transform="matrix(.18519 0 0 .18519-79.07 879.21)" fill="#f8c500"/></g></g><g id="domicube_type"><path d="m3.21 1045.57h3.581v3.581h-3.581z" fill="none" stroke="#605f5f" stroke-linejoin="round" stroke-width=".419" transform="translate(0-1042.36)"/></g><g id="focus"><path d="m2.083 6.25h-.833v1.667c0 .46.373.833.833.833h1.667v-.833h-1.667v-1.667m0-4.167h1.667v-.833h-1.667c-.46 0-.833.373-.833.833v1.667h.833v-1.667m5.833-.833h-1.667v.833h1.667v1.667h.833v-1.667c0-.46-.373-.833-.833-.833m0 6.667h-1.667v.833h1.667c.46 0 .833-.373.833-.833v-1.667h-.833v1.667m-2.917-4.583c-.921 0-1.667.746-1.667 1.667 0 .921.746 1.667 1.667 1.667.921 0 1.667-.746 1.667-1.667 0-.921-.746-1.667-1.667-1.667m0 2.5c-.46 0-.833-.373-.833-.833 0-.46.373-.833.833-.833.46 0 .833.373.833.833 0 .46-.373.833-.833.833"/></g><g id="focused"><path d="m5 3.333c-.921 0-1.667.746-1.667 1.667 0 .921.746 1.667 1.667 1.667.921 0 1.667-.746 1.667-1.667 0-.921-.746-1.667-1.667-1.667m-2.917 2.917h-.833v1.667c0 .46.373.833.833.833h1.667v-.833h-1.667v-1.667m0-4.167h1.667v-.833h-1.667c-.46 0-.833.373-.833.833v1.667h.833v-1.667m5.833-.833h-1.667v.833h1.667v1.667h.833v-1.667c0-.46-.373-.833-.833-.833m0 6.667h-1.667v.833h1.667c.46 0 .833-.373.833-.833v-1.667h-.833v1.667"/></g><g id="illumination_state_off"><g transform="matrix(.17241 0 0 .17241-36.897-27.759)"><path d="m271 209c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38" fill="#f9f9f9"/><path stroke-miterlimit="10" d="m271 209c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38z" fill="none" stroke="#f8c500" stroke-width="2"/></g><g transform="matrix(.17241 0 0 .17241-36.983-26.983)"><path stroke-miterlimit="10" d="m248.01 185.6c0 2.477-2.01 4.482-4.483 4.482-2.477 0-4.483-2.01-4.483-4.482 0-2.479 2.01-4.484 4.483-4.484 2.475-.001 4.483 2 4.483 4.484z" fill="#808080" stroke="#605f5f" stroke-width="3"/><g fill="#605f5f"><path d="m240 182.66c.333.465.311 1.05-.05 1.305-.358.255-.917.083-1.249-.384l-4.795-6.76c-.33-.466-.309-1.051.051-1.305.359-.257.918-.085 1.25.382l4.793 6.762"/><path d="m240.47 189.02c.538-.379 1.179-.398 1.435-.039.254.359.022.961-.514 1.34l-7.786 5.511c-.54.38-1.181.397-1.436.04-.254-.362-.024-.96.513-1.34l7.788-5.512"/><path d="m246.52 189.22c-.366-.519-.373-1.144-.013-1.396.36-.255.947-.043 1.312.473l5.29 7.475c.363.516.369 1.14.012 1.396-.359.252-.947.041-1.312-.475l-5.289-7.473"/><path d="m247.65 183.07c-.465.332-1.05.309-1.304-.051-.255-.36-.082-.918.386-1.251l6.762-4.786c.467-.328 1.054-.306 1.305.056.257.356.083.917-.384 1.245l-6.765 4.787"/><path d="m245 200.09c0 .642-.34.912-.759.912h-.482c-.419 0-.759-.271-.759-.912v-9.926c0-.642.34-1.162.759-1.162h.482c.419 0 .759.521.759 1.162v9.926"/><path d="m245 180.14c0 .607-.34.864-.759.864h-.482c-.419 0-.759-.257-.759-.864v-9.409c0-.608.34-.727.759-.727h.482c.419 0 .759.118.759.727v9.409"/><path d="m259 186.24c0 .419-.869.759-1.424.759h-8.572c-.555 0-1-.34-1-.759v-.482c0-.419.449-.759 1-.759h8.572c.555 0 1.424.34 1.424.759v.482"/><path d="m239 186.24c0 .419-.46.759-1.027.759h-8.778c-.567 0-1.194-.34-1.194-.759v-.482c0-.419.627-.759 1.194-.759h8.778c.567 0 1.027.34 1.027.759v.482"/></g><ellipse stroke-miterlimit="10" cx="243.53" cy="185.69" rx="6.875" ry="6.81" fill="none" stroke="#f9f9f9" stroke-width="3"/></g><path stroke-miterlimit="10" d="m1.346 1.989h1.296" fill="none" stroke="#605f5f" stroke-width=".37"/></g><g id="illumination_state_on"><g transform="matrix(.17241 0 0 .17241-36.897-27.759)"><path d="m271 209c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38" fill="#f9f9f9"/><path stroke-miterlimit="10" d="m271 209c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38z" fill="none" stroke="#f8c500" stroke-width="2"/></g><g transform="matrix(.17241 0 0 .17241-36.983-26.983)"><path stroke-miterlimit="10" d="m248.01 185.6c0 2.477-2.01 4.482-4.483 4.482-2.477 0-4.483-2.01-4.483-4.482 0-2.479 2.01-4.484 4.483-4.484 2.475-.001 4.483 2 4.483 4.484z" fill="#f8c500" stroke="#605f5f" stroke-width="3"/><g fill="#605f5f"><path d="m240 182.66c.333.465.311 1.05-.05 1.305-.358.255-.917.083-1.249-.384l-4.795-6.76c-.33-.466-.309-1.051.051-1.305.359-.257.918-.085 1.25.382l4.793 6.762"/><path d="m240.47 189.02c.538-.379 1.179-.398 1.435-.039.254.359.022.961-.514 1.34l-7.786 5.511c-.54.38-1.181.397-1.436.04-.254-.362-.024-.96.513-1.34l7.788-5.512"/><path d="m246.52 189.22c-.366-.519-.373-1.144-.013-1.396.36-.255.947-.043 1.312.473l5.29 7.475c.363.516.369 1.14.012 1.396-.359.252-.947.041-1.312-.475l-5.289-7.473"/><path d="m247.65 183.07c-.465.332-1.05.309-1.304-.051-.255-.36-.082-.918.386-1.251l6.762-4.786c.467-.328 1.054-.306 1.305.056.257.356.083.917-.384 1.245l-6.765 4.787"/><path d="m245 200.09c0 .642-.34.912-.759.912h-.482c-.419 0-.759-.271-.759-.912v-9.926c0-.642.34-1.162.759-1.162h.482c.419 0 .759.521.759 1.162v9.926"/><path d="m245 180.14c0 .607-.34.864-.759.864h-.482c-.419 0-.759-.257-.759-.864v-9.409c0-.608.34-.727.759-.727h.482c.419 0 .759.118.759.727v9.409"/><path d="m259 186.24c0 .419-.869.759-1.424.759h-8.572c-.555 0-1-.34-1-.759v-.482c0-.419.449-.759 1-.759h8.572c.555 0 1.424.34 1.424.759v.482"/><path d="m239 186.24c0 .419-.46.759-1.027.759h-8.778c-.567 0-1.194-.34-1.194-.759v-.482c0-.419.627-.759 1.194-.759h8.778c.567 0 1.027.34 1.027.759v.482"/></g><ellipse stroke-miterlimit="10" cx="243.53" cy="185.69" rx="6.875" ry="6.81" fill="none" stroke="#f9f9f9" stroke-width="3"/></g><circle r="6.397" stroke-miterlimit="10" cy="891.73" cx="437.73" transform="matrix(.18519 0 0 .18519-79.07-163.15)" fill="#f8c500"/></g><g id="illumination_type"><g transform="matrix(.17241 0 0 .17241-36.983-26.983)"><path d="m248.01 185.6c0 2.477-2.01 4.482-4.483 4.482-2.477 0-4.483-2.01-4.483-4.482 0-2.479 2.01-4.484 4.483-4.484 2.475-.001 4.483 2 4.483 4.484z" stroke-miterlimit="10" fill="#bebebe" stroke="#5f5f5f" stroke-width="3"/><g fill="#5f5f5f"><path d="m240 182.66c.333.465.311 1.05-.05 1.305-.358.255-.917.083-1.249-.384l-4.795-6.76c-.33-.466-.309-1.051.051-1.305.359-.257.918-.085 1.25.382l4.793 6.762"/><path d="m240.47 189.02c.538-.379 1.179-.398 1.435-.039.254.359.022.961-.514 1.34l-7.786 5.511c-.54.38-1.181.397-1.436.04-.254-.362-.024-.96.513-1.34l7.788-5.512"/><path d="m246.52 189.22c-.366-.519-.373-1.144-.013-1.396.36-.255.947-.043 1.312.473l5.29 7.475c.363.516.369 1.14.012 1.396-.359.252-.947.041-1.312-.475l-5.289-7.473"/><path d="m247.65 183.07c-.465.332-1.05.309-1.304-.051-.255-.36-.082-.918.386-1.251l6.762-4.786c.467-.328 1.054-.306 1.305.056.257.356.083.917-.384 1.245l-6.765 4.787"/><path d="m245 200.09c0 .642-.34.912-.759.912h-.482c-.419 0-.759-.271-.759-.912v-9.926c0-.642.34-1.162.759-1.162h.482c.419 0 .759.521.759 1.162v9.926"/><path d="m245 180.14c0 .607-.34.864-.759.864h-.482c-.419 0-.759-.257-.759-.864v-9.409c0-.608.34-.727.759-.727h.482c.419 0 .759.118.759.727v9.409"/><path d="m259 186.24c0 .419-.869.759-1.424.759h-8.572c-.555 0-1-.34-1-.759v-.482c0-.419.449-.759 1-.759h8.572c.555 0 1.424.34 1.424.759v.482"/><path d="m239 186.24c0 .419-.46.759-1.027.759h-8.778c-.567 0-1.194-.34-1.194-.759v-.482c0-.419.627-.759 1.194-.759h8.778c.567 0 1.027.34 1.027.759v.482"/></g><ellipse ry="6.81" rx="6.875" cy="185.69" cx="243.53" stroke-miterlimit="10" fill="none" stroke="#f9f9f9" stroke-width="3"/></g></g><g id="keycardswitch_state_in"><g transform="matrix(.17857 0 0 .17857-40-57.679)"><path fill="#f9f9f9" d="m279 369c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36"/><path d="m279 369c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36z" stroke="#f8c500" stroke-miterlimit="10" stroke-width="2" fill="none"/></g><g transform="matrix(.17857 0 0 .17857-40-57.679)"><path opacity=".31" fill="#bf9100" d="m260.42 350h-17.42v-7.13z"/><path stroke-width="2" stroke="#f9f9f9" stroke-miterlimit="10" fill="none" d="m252 353v14"/><path fill="#f9f9f9" d="m255 366.36l-3 3.39-3-3.39v-2.88l3 3.39 3-3.39z"/></g><path fill="#333" d="m2.679 3.929h4.464v5h-4.464z"/><path transform="matrix(.17857 0 0 .17857-40-57.679)" stroke="#cecece" stroke-miterlimit="10" fill="none" d="m240.38 346.17l1.95 3.33h19.67l1.27-3.36"/><path fill="#f8c500" d="m3.393 3.571h3.214v1.25h-3.214z"/></g><g id="keycardswitch_state_out"><g transform="matrix(.17857 0 0 .17857-11.607-57.679)"><path fill="#f9f9f9" d="m120 369c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36"/><path d="m120 369c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36z" stroke="#f8c500" stroke-miterlimit="10" stroke-width="2" fill="none"/></g><path fill="#333" d="m2.857 3.929h4.286v5h-4.286z"/><path transform="matrix(.17857 0 0 .17857-11.607-57.679)" stroke="#cecece" stroke-miterlimit="10" fill="none" d="m81.43 346.14l1.95 3.36h19.72l1.27-3.38"/><path fill="#f8c500" d="m3.571.893h2.857v3.75h-2.857z"/><path opacity=".31" transform="matrix(.17857 0 0 .17857-11.607-57.679)" fill="#bf9100" d="M85 328.22 101.51 349 85 349z"/></g><g id="keycardswitch_type"><g fill="#666"><path d="m2.857 3.929h4.286v5h-4.286z"/><path transform="matrix(.17857 0 0 .17857-11.607-57.679)" stroke="#cecece" stroke-miterlimit="10" d="m81.43 346.14l1.95 3.36h19.72l1.27-3.38"/></g><path fill="#999" d="m3.571.893h2.857v3.75h-2.857z"/><path opacity=".31" transform="matrix(.17857 0 0 .17857-11.607-57.679)" fill="#666" d="M85 328.22 101.51 349 85 349z"/></g><g id="magnify"><g transform="matrix(.06305 0 0 .06335 0-.157)"><path d="m67.37 66.43c-3.964 3.973-3.972 10.405 0 14.369l73.899 73.903c3.971 3.964 10.401 3.964 14.373 0 3.963-3.972 3.963-10.412 0-14.376l-73.903-73.889c-1.981-1.984-4.58-2.976-7.18-2.976-2.6 0-5.201.992-7.188 2.976z"/><path d="m5.804 55.611c0 27.609 22.377 49.992 49.981 49.992 27.597 0 49.98-22.383 49.98-49.992 0-27.595-22.377-49.969-49.975-49.969-27.604 0-49.981 22.374-49.981 49.972z" fill="#0ff"/><path d="m55.891 16.495c9.06 0 17.537 1.599 24.78 4.372-6.461-5.217-15.177-8.424-24.78-8.424-9.603 0-18.321 3.207-24.781 8.424 7.243-2.773 15.717-4.372 24.781-4.372" fill="#fff"/><path d="m76.75 51.43v7.932h-16.468v16.771h-8.64v-16.771h-16.468v-7.932h16.468v-16.869h8.64v16.869h16.468" fill="#1a1a1a"/><g fill="#666"><path d="m86.16 99.58l14.09 14.1 14.37-14.369-14.1-14.09-14.364 14.368"/><path d="m0 55.829c0 30.93 25.07 56.01 56 56.01 30.924 0 55.998-25.08 55.998-56.01 0-30.92-25.07-55.997-55.998-55.997-30.93-.005-56 25.07-56 55.992z"/></g></g></g><g id="mediaplayer_state_off"><g transform="translate(-7.627-1049.44)"><g transform="matrix(.17241 0 0 .17241-16.855 1035.13)"><path d="m199 131c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38" fill="#f9f9f9"/><path stroke-miterlimit="10" d="m199 131c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38z" fill="none" stroke="#f8c500" stroke-width="2"/></g><path stroke-miterlimit="10" d="m8.973 1051.43h1.296" fill="none" stroke="#605f5f" stroke-width=".37"/></g><g transform="matrix(.08333 0 0 .08333 2.333 2.333)" fill="#666"><path d="m52 12.982h-40c-2.2 0-4 1.8-4 4v30.04c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4v-30.04c0-2.2-1.8-4-4-4m-23.796 7.807l9.593 6.55-9.593 6.55v-13.1m19.797 22.423h-21.13c-.57 1.24-1.816 2.105-3.27 2.105-1.454 0-2.699-.866-3.27-2.105h-4.335c-.829 0-1.5-.672-1.5-1.5 0-.828.671-1.5 1.5-1.5h4.336c.57-1.24 1.815-2.106 3.27-2.106 1.455 0 2.7.866 3.27 2.106h21.13c.828 0 1.5.672 1.5 1.5 0 .828-.673 1.5-1.501 1.5"/><circle cx="23.605" cy="41.712" r="1.397"/></g></g><g id="mediaplayer_state_on"><g transform="translate(-7.627-1049.44)"><g transform="matrix(.17241 0 0 .17241-16.855 1035.13)"><path d="m199 131c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38" fill="#f9f9f9"/><path stroke-miterlimit="10" d="m199 131c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38z" fill="none" stroke="#f8c500" stroke-width="2"/></g><circle r="6.397" stroke-miterlimit="10" cy="891.73" cx="437.73" transform="matrix(.18519 0 0 .18519-71.44 886.29)" fill="#f8c500"/></g><g transform="matrix(.08333 0 0 .08333 2.333 2.333)" fill="#666"><path d="m52 12.982h-40c-2.2 0-4 1.8-4 4v30.04c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4v-30.04c0-2.2-1.8-4-4-4m-23.796 7.807l9.593 6.55-9.593 6.55v-13.1m19.797 22.423h-21.13c-.57 1.24-1.816 2.105-3.27 2.105-1.454 0-2.699-.866-3.27-2.105h-4.335c-.829 0-1.5-.672-1.5-1.5 0-.828.671-1.5 1.5-1.5h4.336c.57-1.24 1.815-2.106 3.27-2.106 1.455 0 2.7.866 3.27 2.106h21.13c.828 0 1.5.672 1.5 1.5 0 .828-.673 1.5-1.501 1.5"/><circle cx="23.605" cy="41.712" r="1.397"/></g></g><g id="mediaplayer_type"><g transform="matrix(.08333 0 0 .08333 2.333 2.333)" fill="#666"><path d="m52 12.982h-40c-2.2 0-4 1.8-4 4v30.04c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4v-30.04c0-2.2-1.8-4-4-4m-23.796 7.807l9.593 6.55-9.593 6.55v-13.1m19.797 22.423h-21.13c-.57 1.24-1.816 2.105-3.27 2.105-1.454 0-2.699-.866-3.27-2.105h-4.335c-.829 0-1.5-.672-1.5-1.5 0-.828.671-1.5 1.5-1.5h4.336c.57-1.24 1.815-2.106 3.27-2.106 1.455 0 2.7.866 3.27 2.106h21.13c.828 0 1.5.672 1.5 1.5 0 .828-.673 1.5-1.501 1.5"/><circle cx="23.605" cy="41.712" r="1.397"/></g></g><g id="program"><g transform="matrix(.10837 0 0 .1001-.418.022)"><path d="m81.902 11.08h-63.813c-3.478 0-6.288 2.936-6.288 6.561v75.47c0 3.625 2.811 6.562 6.288 6.562h63.813c3.477 0 6.29-2.938 6.29-6.562v-75.47c0-3.624-2.813-6.561-6.29-6.561m.755 79.01s.173 1.517-.537 2.303c-.721.8-2.055.691-2.055.691l-60.709.032s-.856-.013-1.509-.762c-.564-.646-.557-2.02-.557-2.02l.022-70.43s0-1.043.611-1.6c.659-.602 1.612-.653 1.612-.653h60.721s1.151-.032 1.689.519c.732.749.71 1.536.71 1.536v70.38z"/><path d="m37.19 32.05h35.439v3.151h-35.439z"/><path d="m26.04 43.29v7.874h7.876v-7.874h-7.876m1.18 6.682v-5.51h5.514v5.51h-5.514"/><path d="m37.19 47.01h35.439v3.15h-35.439z"/><path d="m37.19 61.36h35.439v3.15h-35.439z"/><path d="m37.19 75.36h35.439v3.149h-35.439z"/><path d="m26.04 28.324v7.875h7.876v-7.875h-7.876m1.18 6.682v-5.509h5.514v5.509h-5.514"/><path d="m26.04 57.636v7.874h7.876v-7.874h-7.876m1.18 6.682v-5.511h5.514v5.511h-5.514"/><path d="m26.04 71.64v7.874h7.876v-7.874h-7.876m1.18 6.681v-5.51h5.514v5.51h-5.514"/><g><path d="m55.722 2.298c0 1.392-1.254 2.519-2.799 2.519h-5.596c-1.546 0-2.799-1.127-2.799-2.519 0-1.39 1.253-2.518 2.799-2.518h5.596c1.545 0 2.799 1.128 2.799 2.518"/><path d="m62.11 7.748c0-1.458-.134-3.888-1.324-3.888h-21.546c-1.113 0-1.38 2.44-1.362 3.883l24.23.005"/><path d="m67.31 12.798c0-2.084-.191-5.556-1.891-5.556h-30.78c-1.592 0-1.972 3.488-1.947 5.549l34.618.007"/></g></g></g><g id="programe"><g transform="matrix(.10837 0 0 .1001-.418.022)"><path d="m81.902 11.08h-63.813c-3.478 0-6.288 2.936-6.288 6.561v75.47c0 3.625 2.811 6.562 6.288 6.562h63.813c3.477 0 6.29-2.938 6.29-6.562v-75.47c0-3.624-2.813-6.561-6.29-6.561m.755 79.01s.173 1.517-.537 2.303c-.721.8-2.055.691-2.055.691l-60.709.032s-.856-.013-1.509-.762c-.564-.646-.557-2.02-.557-2.02l.022-70.43s0-1.043.611-1.6c.659-.602 1.612-.653 1.612-.653h60.721s1.151-.032 1.689.519c.732.749.71 1.536.71 1.536v70.38z"/><path d="m37.19 32.05h35.439v3.151h-35.439z"/><path d="m26.04 43.29v7.874h7.876v-7.874h-7.876m1.18 6.682v-5.51h5.514v5.51h-5.514"/><path d="m37.19 47.01h35.439v3.15h-35.439z"/><path d="m37.19 61.36h35.439v3.15h-35.439z"/><path d="m37.19 75.36h35.439v3.149h-35.439z"/><path d="m26.04 28.324v7.875h7.876v-7.875h-7.876m1.18 6.682v-5.509h5.514v5.509h-5.514"/><path d="m26.04 57.636v7.874h7.876v-7.874h-7.876m1.18 6.682v-5.511h5.514v5.511h-5.514"/><path d="m26.04 71.64v7.874h7.876v-7.874h-7.876m1.18 6.681v-5.51h5.514v5.51h-5.514"/><g><path d="m55.722 2.298c0 1.392-1.254 2.519-2.799 2.519h-5.596c-1.546 0-2.799-1.127-2.799-2.519 0-1.39 1.253-2.518 2.799-2.518h5.596c1.545 0 2.799 1.128 2.799 2.518"/><path d="m62.11 7.748c0-1.458-.134-3.888-1.324-3.888h-21.546c-1.113 0-1.38 2.44-1.362 3.883l24.23.005"/><path d="m67.31 12.798c0-2.084-.191-5.556-1.891-5.556h-30.78c-1.592 0-1.972 3.488-1.947 5.549l34.618.007"/></g></g></g><g id="read"><g transform="matrix(.10837 0 0 .1001.442.022)"><path d="m81.902 11.08h-63.813c-3.478 0-6.288 2.936-6.288 6.561v75.47c0 3.625 2.811 6.562 6.288 6.562h63.813c3.477 0 6.29-2.938 6.29-6.562v-75.47c0-3.624-2.813-6.561-6.29-6.561m.755 79.01s.173 1.517-.537 2.303c-.721.8-2.055.691-2.055.691l-60.709.032s-.856-.013-1.509-.762c-.564-.646-.557-2.02-.557-2.02l.022-70.43s0-1.043.611-1.6c.659-.602 1.612-.653 1.612-.653h60.721s1.151-.032 1.689.519c.732.749.71 1.536.71 1.536v70.38z"/><path d="m37.19 32.05h35.439v3.151h-35.439z"/><path d="m26.04 43.29v7.874h7.876v-7.874h-7.876m1.18 6.682v-5.51h5.514v5.51h-5.514"/><path d="m37.19 47.01h35.439v3.15h-35.439z"/><path d="m37.19 61.36h35.439v3.15h-35.439z"/><path d="m37.19 75.36h35.439v3.149h-35.439z"/><path d="m26.04 28.324v7.875h7.876v-7.875h-7.876m1.18 6.682v-5.509h5.514v5.509h-5.514"/><path d="m26.04 57.636v7.874h7.876v-7.874h-7.876m1.18 6.682v-5.511h5.514v5.511h-5.514"/><path d="m26.04 71.64v7.874h7.876v-7.874h-7.876m1.18 6.681v-5.51h5.514v5.51h-5.514"/><g><path d="m55.722 2.298c0 1.392-1.254 2.519-2.799 2.519h-5.596c-1.546 0-2.799-1.127-2.799-2.519 0-1.39 1.253-2.518 2.799-2.518h5.596c1.545 0 2.799 1.128 2.799 2.518"/><path d="m62.11 7.748c0-1.458-.134-3.888-1.324-3.888h-21.546c-1.113 0-1.38 2.44-1.362 3.883l24.23.005"/><path d="m67.31 12.798c0-2.084-.191-5.556-1.891-5.556h-30.78c-1.592 0-1.972 3.488-1.947 5.549l34.618.007"/></g></g><path d="m4.605 7.172v-.697h-2.271-2.271v-1.17-1.17h2.271 2.271l.004-.695.004-.695 1.549 1.279c1.197.989 1.34 1.151 1.528 1.306-.024.032-3.061 2.539-3.076 2.539-.005 0-.01-.314-.01-.697z" stroke="#0000bf" stroke-width=".045" fill="#3a88ff"/></g><g id="single_switch_state_5"><g transform="matrix(.17857 0 0 .17857-39.821-71.43)"><path d="m278 446c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36" fill="#f9f9f9"/><path d="m278 446c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36z" stroke-miterlimit="10" fill="none" stroke="#f8c500" stroke-width="2"/><path d="m267 446c0 1.104-.896 2-2 2h-29c-1.104 0-2-.896-2-2v-27c0-1.104.896-2 2-2h29c1.104 0 2 .896 2 2v27" fill="#a0a0a0"/></g><g opacity=".09"><path d="m267 446c0 1.104-.896 2-2 2h-29c-1.104 0-2-.896-2-2v-21c0-1.104.896-2 2-2h29c1.104 0 2 .896 2 2v21" fill="#fff" transform="matrix(.17857 0 0 .17857-39.821-71.43)"/></g><g transform="matrix(.17857 0 0 .17857-39.821-71.43)" fill="none" stroke="#919191" stroke-miterlimit="10"><path d="m248.27 411.16c1.63-1.63 4.272-1.629 5.901.001"/><path d="m249.6 412.81c.869-.869 2.276-.868 3.146 0"/><path d="m246.4 409.06c2.495-2.495 6.603-2.431 9.176.142"/></g><path fill="#f9f9f9" d="m2.679 3.571h4.286v4.643h-4.286z"/><path fill="#f8c500" d="m3.036 5.893h3.75v2.143h-3.75z"/></g><g id="single_switch_state_7"><g transform="matrix(.17857 0 0 .17857-53.57-71.07)"><path d="m355 444c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36" fill="#f9f9f9"/><path d="m355 444c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36z" stroke-miterlimit="10" fill="none" stroke="#f8c500" stroke-width="2"/><path d="m344 444c0 1.104-.896 2-2 2h-28c-1.104 0-2-.896-2-2v-26c0-1.104.896-2 2-2h28c1.104 0 2 .896 2 2v26" fill="#a0a0a0"/></g><g opacity=".09"><path d="m344 444c0 1.104-.896 2-2 2h-28c-1.104 0-2-.896-2-2v-20c0-1.104.896-2 2-2h28c1.104 0 2 .896 2 2v20" fill="#fff" transform="matrix(.17857 0 0 .17857-53.57-71.07)"/></g><g transform="matrix(.17857 0 0 .17857-53.57-71.07)" fill="none" stroke="#919191" stroke-miterlimit="10"><path d="m324.81 409.02c1.572-1.572 4.123-1.571 5.695.001"/><path d="m326.09 410.61c.839-.838 2.197-.837 3.036.001"/><path d="m323 407c2.408-2.408 6.372-2.347 8.854.137"/></g><path fill="#f9f9f9" d="m2.857 3.75h4.107v4.464h-4.107z"/><path fill="#f8c500" d="m3.214 3.929h3.571v2.143h-3.571z"/></g><g id="smartplug_state_off"><g transform="matrix(.18519 0 0 .18519-52.963-162.96)"><path d="m339 924c0 4.971-4.03 9-9 9h-34c-4.971 0-9-4.03-9-9v-34c0-4.971 4.03-9 9-9h34c4.971 0 9 4.03 9 9v34" fill="#f9f9f9"/><path d="m339 924c0 4.971-4.03 9-9 9h-34c-4.971 0-9-4.03-9-9v-34c0-4.971 4.03-9 9-9h34c4.971 0 9 4.03 9 9v34z" stroke="#f8c500" stroke-width="2" fill="none" stroke-miterlimit="10"/></g><g transform="translate(-.709-.398)"><circle r="10.38" cy="909.15" cx="316.83" transform="matrix(.18519 0 0 .18519-52.963-162.96)" fill="#fff" stroke="#545454" stroke-width=".5"/><path d="m6.01 4.384c0 .172-.139.31-.31.31-.171 0-.31-.139-.31-.31 0-.171.139-.31.31-.31.171 0 .31.139.31.31" fill="#999"/><g transform="matrix(.18519 0 0 .18519-52.963-162.96)" fill="#605f5f"><circle r="1.393" cy="910.08" cx="322.96"/><circle r="1.392" cy="910.08" cx="310.63"/></g></g><path stroke-miterlimit="10" d="m1.346 1.989h1.296" fill="none" stroke="#605f5f" stroke-width=".37"/></g><g id="smartplug_state_on"><path d="m9.821 8.151c0 .921-.746 1.667-1.667 1.667h-6.296c-.921 0-1.667-.746-1.667-1.667v-6.296c0-.921.746-1.667 1.667-1.667h6.296c.921 0 1.667.746 1.667 1.667v6.296" fill="#f9f9f9"/><g stroke-miterlimit="10"><path d="m480 925c0 4.971-4.03 9-9 9h-34c-4.971 0-9-4.03-9-9v-34c0-4.971 4.03-9 9-9h34c4.971 0 9 4.03 9 9v34z" fill="none" stroke="#f8c500" stroke-width="2" transform="matrix(.18519 0 0 .18519-79.07-163.15)"/></g><g transform="translate(.031.343)"><circle cx="453.83" cy="906.15" r="10.38" transform="matrix(.18519 0 0 .18519-79.07-163.15)" fill="#fff" stroke="#545454" stroke-width=".5" stroke-miterlimit="10"/><path d="m5.266 3.643c0 .172-.139.31-.31.31-.171 0-.31-.139-.31-.31 0-.171.139-.31.31-.31.171 0 .31.139.31.31" fill="#999"/><g transform="matrix(.18519 0 0 .18519-79.07-163.15)" fill="#605f5f"><circle cx="459.96" cy="907.08" r="1.393"/><circle cx="447.63" cy="907.08" r="1.392"/></g></g><circle r="6.397" stroke-miterlimit="10" cy="891.73" cx="437.73" transform="matrix(.18519 0 0 .18519-79.07-163.15)" fill="#f8c500"/></g><g id="smartplug_type"><circle stroke-width=".5" cx="453.83" cy="906.15" transform="matrix(.18519 0 0 .18519-79.07-163.15)" stroke="#545454" stroke-miterlimit="10" r="10.38" fill="#fff"/><path d="m5.266 3.643c0 .172-.139.31-.31.31-.171 0-.31-.139-.31-.31 0-.171.139-.31.31-.31.171 0 .31.139.31.31" fill="#999"/><g fill="#605f5f" transform="matrix(.18519 0 0 .18519-79.07-163.15)"><circle cx="459.96" cy="907.08" r="1.393"/><circle cx="447.63" cy="907.08" r="1.392"/></g></g><g id="switch_state_1"><g transform="matrix(.17857 0 0 .17857-63.75-86.79)"><path d="m412 532c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36" fill="#f9f9f9"/><path d="m412 532c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36z" stroke="#f8c500" stroke-miterlimit="10" stroke-width="2" fill="none"/><path d="m401 532c0 1.104-.896 2-2 2h-28c-1.104 0-2-.896-2-2v-27c0-1.104.896-2 2-2h28c1.104 0 2 .896 2 2v27" fill="#a0a0a0"/></g><g opacity=".09"><path d="m401 532c0 1.104-.896 2-2 2h-28c-1.104 0-2-.896-2-2v-21c0-1.104.896-2 2-2h28c1.104 0 2 .896 2 2v21" fill="#fff" transform="matrix(.17857 0 0 .17857-63.75-86.79)"/></g><g fill="#f9f9f9"><path d="m3.036 3.393h2.143v4.821h-2.143z"/><path d="m5.179 3.393h1.786v4.821h-1.786z"/></g><g stroke="#919191" fill="none" stroke-miterlimit="10" transform="matrix(.17857 0 0 .17857-63.75-86.79)"><path d="m382.69 497.91c1.525-1.525 3.999-1.524 5.524.001"/><path d="m383.94 499.45c.814-.813 2.132-.812 2.945.001"/><path d="m380.94 495.95c2.336-2.336 6.182-2.276 8.59.133"/></g><path fill="#fff" d="m3.036 3.393h1.964v4.821h-1.964z"/><path fill="#1e1e1e" d="m5 3.393h1.964v4.821h-1.964z"/><path stroke-width=".179" stroke="#605f5f" stroke-miterlimit="10" fill="none" d="m5.089 3.393v4.821"/><path fill="#f8c500" d="m3.214 3.571h1.607v1.786h-1.607z"/></g><g id="switch_state_3"><g transform="matrix(.17857 0 0 .17857-89.29-87.32)"><path d="m555 535c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36" fill="#f9f9f9"/><path d="m555 535c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36z" stroke="#f8c500" stroke-miterlimit="10" stroke-width="2" fill="none"/><path d="m543 534c0 1.104-.896 2-2 2h-27c-1.104 0-2-.896-2-2v-25c0-1.104.896-2 2-2h27c1.104 0 2 .896 2 2v25" fill="#a0a0a0"/></g><g opacity=".09"><path d="m543 534c0 1.104-.896 2-2 2h-27c-1.104 0-2-.896-2-2v-19c0-1.104.896-2 2-2h27c1.104 0 2 .896 2 2v19" fill="#fff" transform="matrix(.17857 0 0 .17857-89.29-87.32)"/></g><g fill="#f9f9f9"><path d="m2.857 3.75h2.143v4.286h-2.143z"/><path d="m5 3.75h1.964v4.286h-1.964z"/></g><g stroke="#919191" fill="none" stroke-miterlimit="10" transform="matrix(.17857 0 0 .17857-89.29-87.32)"><path d="m524.6 501.88c1.462-1.463 3.833-1.462 5.294.001"/><path d="m525.79 503.36c.779-.779 2.042-.778 2.821.001"/><path d="m522.92 500.01c2.238-2.239 5.923-2.182 8.231.126"/></g><path fill="#fff" d="m2.857 3.75h1.964v4.286h-1.964z"/><path fill="#1e1e1e" d="m4.821 3.75h2.143v4.286h-2.143z"/><path stroke-width=".179" stroke="#605f5f" stroke-miterlimit="10" fill="none" d="m4.911 3.75v4.286"/><path fill="#f8c500" d="m3.036 6.071h1.607v1.786h-1.607z"/></g><g id="switch_state_5"><g transform="matrix(.17857 0 0 .17857-36.964-86.25)"><path d="m262 529c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36" fill="#f9f9f9"/><path d="m262 529c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36z" stroke="#f8c500" stroke-miterlimit="10" stroke-width="2" fill="none"/><path d="m251 528c0 1.104-.896 2-2 2h-28c-1.104 0-2-.896-2-2v-26c0-1.104.896-2 2-2h28c1.104 0 2 .896 2 2v26" fill="#a0a0a0"/></g><g opacity=".09"><path d="m251 528c0 1.104-.896 2-2 2h-28c-1.104 0-2-.896-2-2v-20c0-1.104.896-2 2-2h28c1.104 0 2 .896 2 2v20" fill="#fff" transform="matrix(.17857 0 0 .17857-36.964-86.25)"/></g><g fill="#f9f9f9"><path d="m3.036 3.393h1.964v4.464h-1.964z"/><path d="m5 3.393h1.964v4.464h-1.964z"/></g><g stroke="#919191" fill="none" stroke-miterlimit="10" transform="matrix(.17857 0 0 .17857-36.964-86.25)"><path d="m232.65 495.86c1.507-1.507 3.951-1.506 5.457.001"/><path d="m233.88 497.39c.804-.804 2.105-.803 2.909.001"/><path d="m230.92 493.93c2.308-2.307 6.106-2.248 8.485.131"/></g><path fill="#fff" d="m3.036 3.393h1.964v4.464h-1.964z"/><path fill="#1e1e1e" d="m5 3.393h1.964v4.464h-1.964z"/><path stroke-width=".179" stroke="#605f5f" stroke-miterlimit="10" fill="none" d="m5.089 3.393v4.464"/><path fill="#f8c500" d="m5.357 3.571h1.429v1.964h-1.429z"/></g><g id="switch_state_7"><g transform="matrix(.17857 0 0 .17857-65.36-101.43)"><path d="m421 614c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36" fill="#f9f9f9"/><path d="m421 614c0 4.971-4.03 9-9 9h-36c-4.971 0-9-4.03-9-9v-36c0-4.971 4.03-9 9-9h36c4.971 0 9 4.03 9 9v36z" stroke="#f8c500" stroke-miterlimit="10" stroke-width="2" fill="none"/><path d="m409 611c0 1.104-.896 2-2 2h-28c-1.104 0-2-.896-2-2v-26c0-1.104.896-2 2-2h28c1.104 0 2 .896 2 2v26" fill="#a0a0a0"/></g><g opacity=".09"><path d="m409 611c0 1.104-.896 2-2 2h-28c-1.104 0-2-.896-2-2v-20c0-1.104.896-2 2-2h28c1.104 0 2 .896 2 2v20" fill="#fff" transform="matrix(.17857 0 0 .17857-65.36-101.43)"/></g><g fill="#f9f9f9"><path d="m2.857 3.036h2.143v4.643h-2.143z"/><path d="m5 3.036h1.964v4.643h-1.964z"/></g><g stroke="#919191" fill="none" stroke-miterlimit="10" transform="matrix(.17857 0 0 .17857-65.36-101.43)"><path d="m390.3 577.68c1.801-1.8 4.721-1.799 6.521.001"/><path d="m391.77 579.51c.96-.96 2.515-.96 3.476.001"/><path d="m388.23 575.37c2.756-2.757 7.296-2.687 10.139.156"/></g><path fill="#fff" d="m2.857 3.036h1.964v4.643h-1.964z"/><path fill="#1e1e1e" d="m4.821 3.036h2.143v4.643h-2.143z"/><path stroke-width=".179" stroke="#605f5f" stroke-miterlimit="10" fill="none" d="m4.911 3.036v4.643"/><path fill="#f8c500" d="m5.179 5.357h1.429v2.143h-1.429z"/></g><g id="switch_type"><path d="m106 524c0 1.104-.896 2-2 2h-28c-1.104 0-2-.896-2-2v-26c0-1.104.896-2 2-2h28c1.104 0 2 .896 2 2v26" fill="#a0a0a0" transform="matrix(.17857 0 0 .17857-11.07-86.25)"/><g opacity=".09"><path d="m106 524c0 1.104-.896 2-2 2h-28c-1.104 0-2-.896-2-2v-20c0-1.104.896-2 2-2h28c1.104 0 2 .896 2 2v20" fill="#fff" transform="matrix(.17857 0 0 .17857-11.07-86.25)"/></g><g fill="#fff"><path d="m3.036 2.857h1.964v4.464h-1.964z"/><path d="m5 2.857h1.964v4.464h-1.964z"/></g></g><g id="temperature_state_off"><text font-size="1.866" x="3.621" y="9.216" fill="#605f5f" font-family="GravurCondensed-Regular">45%</text><g transform="matrix(.17241 0 0 .17241-24.483-14.31)"><path d="m199 131c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38" fill="#f9f9f9"/><path stroke-miterlimit="10" d="m199 131c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38z" fill="none" stroke="#f8c500" stroke-width="2"/></g><g transform="translate(.135.846)"><path d="m5.446 4.768v-2.39c0-.321-.261-.581-.581-.581-.321 0-.581.261-.581.581v2.39c-.242.181-.387.466-.387.775 0 .534.434.969.969.969.534 0 .969-.435.969-.969 0-.31-.145-.594-.387-.775m-.581 1.486c-.392 0-.711-.318-.711-.711 0-.276.157-.515.388-.633v-2.532c0-.178.144-.323.323-.323.178 0 .323.144.323.323v2.532c.23.118.388.357.388.633 0 .392-.318.711-.711.711" fill="#605f5f"/><path d="m5.05 5.05v-1.544h-.367v1.544c-.202.075-.346.269-.346.497 0 .293.237.53.53.53.292 0 .53-.237.53-.53 0-.228-.144-.422-.346-.497" fill="#b3b3b3"/></g><path stroke-miterlimit="10" d="m1.346 1.989h1.296" fill="none" stroke="#605f5f" stroke-width=".37"/></g><g id="temperature_state_on"><text font-size="1.866" x="3.621" y="9.216" fill="#605f5f" font-family="GravurCondensed-Regular">45%</text><g transform="matrix(.17241 0 0 .17241-24.483-14.31)"><path d="m199 131c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38" fill="#f9f9f9"/><path stroke-miterlimit="10" d="m199 131c0 4.971-4.03 9-9 9h-38c-4.971 0-9-4.03-9-9v-38c0-4.971 4.03-9 9-9h38c4.971 0 9 4.03 9 9v38z" fill="none" stroke="#f8c500" stroke-width="2"/></g><g transform="translate(.135.846)"><path d="m5.446 4.768v-2.39c0-.321-.261-.581-.581-.581-.321 0-.581.261-.581.581v2.39c-.242.181-.387.466-.387.775 0 .534.434.969.969.969.534 0 .969-.435.969-.969 0-.31-.145-.594-.387-.775m-.581 1.486c-.392 0-.711-.318-.711-.711 0-.276.157-.515.388-.633v-2.532c0-.178.144-.323.323-.323.178 0 .323.144.323.323v2.532c.23.118.388.357.388.633 0 .392-.318.711-.711.711" fill="#605f5f"/><path d="m5.05 5.05v-1.544h-.367v1.544c-.202.075-.346.269-.346.497 0 .293.237.53.53.53.292 0 .53-.237.53-.53 0-.228-.144-.422-.346-.497" fill="#f8c500"/></g><circle r="6.397" stroke-miterlimit="10" cy="891.73" cx="437.73" transform="matrix(.18519 0 0 .18519-79.07-163.15)" fill="#f8c500"/></g><g id="temperature_type"><path d="m5.806 5.457v-2.945c0-.395-.321-.716-.716-.716-.395 0-.716.321-.716.716v2.945c-.298.223-.477.573-.477.955 0 .658.535 1.194 1.194 1.194s1.194-.535 1.194-1.194c0-.381-.179-.732-.477-.955m-.716 1.83c-.483 0-.875-.392-.875-.875 0-.34.194-.635.477-.78v-3.12c0-.22.178-.398.398-.398s.398.178.398.398v3.12c.283.145.477.439.477.78 0 .483-.392.875-.875.875" fill="#605f5f"/></g><g id="user"><path d="m4.291 2.353c1.281 0 2.319-1.301 2.319-2.906 0-1.605-1.038-2.906-2.319-2.906s-2.319 1.301-2.319 2.906c0 1.605 1.038 2.906 2.319 2.906-2.647 0-4.814 1.847-5 4.188h10c-.186-2.341-2.353-4.188-5-4.188"/></g><g id="write"><g transform="matrix(.10837 0 0 .1001-1.279.022)"><path d="m81.902 11.08h-63.813c-3.478 0-6.288 2.936-6.288 6.561v75.47c0 3.625 2.811 6.562 6.288 6.562h63.813c3.477 0 6.29-2.938 6.29-6.562v-75.47c0-3.624-2.813-6.561-6.29-6.561m.755 79.01s.173 1.517-.537 2.303c-.721.8-2.055.691-2.055.691l-60.709.032s-.856-.013-1.509-.762c-.564-.646-.557-2.02-.557-2.02l.022-70.43s0-1.043.611-1.6c.659-.602 1.612-.653 1.612-.653h60.721s1.151-.032 1.689.519c.732.749.71 1.536.71 1.536v70.38z"/><path d="m37.19 32.05h35.439v3.151h-35.439z"/><path d="m26.04 43.29v7.874h7.876v-7.874h-7.876m1.18 6.682v-5.51h5.514v5.51h-5.514"/><path d="m37.19 47.01h35.439v3.15h-35.439z"/><path d="m37.19 61.36h35.439v3.15h-35.439z"/><path d="m37.19 75.36h35.439v3.149h-35.439z"/><path d="m26.04 28.324v7.875h7.876v-7.875h-7.876m1.18 6.682v-5.509h5.514v5.509h-5.514"/><path d="m26.04 57.636v7.874h7.876v-7.874h-7.876m1.18 6.682v-5.511h5.514v5.511h-5.514"/><path d="m26.04 71.64v7.874h7.876v-7.874h-7.876m1.18 6.681v-5.51h5.514v5.51h-5.514"/><g><path d="m55.722 2.298c0 1.392-1.254 2.519-2.799 2.519h-5.596c-1.546 0-2.799-1.127-2.799-2.519 0-1.39 1.253-2.518 2.799-2.518h5.596c1.545 0 2.799 1.128 2.799 2.518"/><path d="m62.11 7.748c0-1.458-.134-3.888-1.324-3.888h-21.546c-1.113 0-1.38 2.44-1.362 3.883l24.23.005"/><path d="m67.31 12.798c0-2.084-.191-5.556-1.891-5.556h-30.78c-1.592 0-1.972 3.488-1.947 5.549l34.618.007"/></g></g><path d="m6.852 7.172v-.697h-2.271-2.271v-1.17-1.17h2.271 2.271l.004-.695.004-.695 1.549 1.279c1.197.989 1.34 1.151 1.528 1.306-.024.032-3.061 2.539-3.076 2.539-.005 0-.01-.314-.01-.697z" stroke="#0000bf" stroke-width=".045" fill="#3a88ff"/></g></defs></svg>',THEMES_BASIC={font:{color:"rgba(76, 76, 76, 1)"},dashboard:{width:960,widget:{height:30,margin:{top:0,left:0,bottom:0,right:0}},group:{height:30,margin:{top:20,left:0,bottom:0,right:0},header:{fill:{color:"transparent"}},container:{padding:{top:10,bottom:10},margin:{top:30,bottom:10}}},sidebar:{width:250,menu:{width:25}},aside:{padding:{left:5,right:5}}},element:{odd:{fill:{color:"#f6f6f6"}},even:{fill:{color:"#fafafa"}},active:{opacity:1},inactive:{opacity:.1},title:{padding:{left:10}}},pictogram:{scale:1.2,dimension:{height:10}},device:{state:{border:{width:2,color:"rgba(154, 207, 7, 0.8)",focused:{width:4,color:"rgba(154, 207, 7, 1)"}},fill:{color:"rgba(154, 207, 7, 0.2)"},focused:{fill:{color:"rgba(154, 207, 7, 0.5)"}}},value:{border:{width:2,color:"rgba(41, 81, 109, 0.8)",focused:{color:"rgba(154, 207, 7, 1)"}},fill:{color:"rgba(41, 81, 109, 0.2)"},focused:{fill:{color:"rgba(41, 81, 109, 0.5)"}}}},program:{state:{height:15,radius:{x:5,y:5},disabled:{color:"rgba(105, 105, 105, 0.3)",focused:{color:"rgba(105, 105, 105, 0.6)"}},enabled:{color:"rgba(154, 207, 7, 0.3)",focused:{color:"rgba(154, 207, 7, 0.6)"}},invalid:{color:"rgba(207, 60, 0, 0.3)",focused:{color:"rgba(207, 60, 0, 0.6)"}}}},status:{border:{width:2},connection:{border:{color:"rgba(154, 207, 7, 0.8)"},focused:{border:{color:"rgba(154, 207, 7, 1)"}}},problem:{border:{color:"rgba(206, 96, 39, 0.80)"},focused:{border:{color:"rgba(206, 96, 39, 1)"}}},disconnection:{border:{color:"rgba(206, 66, 66, 0.80)"},focused:{border:{color:"rgba(206, 66, 66, 1)"}}}},ruler:{width:5,fill:{color:"#e0e0e0"},border:{width:2,color:"transparent"},line:{width:1,left:2,fill:{color:"#696969"}},lookahead:2},focusline:{height:80,margin:{top:10,left:0,bottom:10,right:0},fill:{color:"transparent"},bar:{fill:{color:"rgba(105, 105, 105, 0.3)"},border:{color:"rgba(105, 0, 105, 0.5)"}},ruler_shadow:{width:1,fill:{color:"rgba(255, 0, 0, 0.3)"}},focused_time:{label:{height:10}},selector:{min_width:30,max_width:"false",fill:{color:"rgba(144, 195, 191, 0.1)"},border:{width:0,color:"rgba(144, 195, 191, 1)"},mask:{fill:{color:"rgba(255, 255, 255, 0.8)"},border:{width:0,color:"transparent"}},handle:{fill:{color:"rgba(105, 105, 105, 0.5)"},width:8}}},axis:{stroke:{color:"rgba(0, 0, 0, 0.1)",width:1},tick:{height:5},label:{height:11}}};
Debugger.themes={basic:THEMES_BASIC};var defaultsDeep=_.partialRight(_.merge,function a(){return _.isArray(arguments[0])||_.isDate(arguments[0])?arguments[0]:_.merge(arguments[0],arguments[1],a)});Debugger.triggerMethod=function(){function a(a,b,c){return c.toUpperCase()}var b=/(^|:)(\w)/gi,c=function(c){var d,e="on"+c.replace(b,a),f=this[e];return _.isFunction(f)&&(d=f.apply(this,_.tail(arguments))),_.isFunction(this.trigger)&&this.trigger.apply(this,arguments),d};return c}(),Debugger.SmartBuffer=function(){var a=function(a){this._buffer=[],this.options=defaultsDeep({},a,{pairing:!1,shadowing:!1,ignoreData:!1})};return _.extend(a.prototype,{concat:function(a){_.each(a,function(a){this.push.apply(this,a)},this)},push:function(a,b){return this.options.ignoreData?void this._buffer.push({timestamp:a}):void(_.isEmpty(this._buffer)&&_.isUndefined(b)||(this.options.pairing?void 0!==b&&_.isEmpty(this._buffer)?this._buffer.push({timestamp:a,data:b,next:this.options.shadowing?{timestamp:a,data:b}:null}):void 0!==b?(this._buffer[this.size()-1].next={timestamp:a,data:b},this._buffer.push({timestamp:a,data:b,next:this.options.shadowing?{timestamp:a,data:b}:null})):this.options.shadowing&&(this._buffer[this.size()-1].next.timestamp=a):void 0!==b&&this._lastIsShadow?(this._buffer[this.size()-1]={timestamp:a,data:b},this._lastIsShadow=!1):void 0!==b&&this._lastIsShadow?this._buffer[this.size()-1].timestamp=a:void 0!==b?this._buffer.push({timestamp:a,data:b}):this.options.shadowing&&(this._buffer.push({timestamp:a,data:this._buffer[this.size()-1].data}),this._lastIsShadow=!0)))},all:function(){return this._buffer},first:function(){return _.first(this._buffer)},last:function(){return _.last(this._buffer)},select:function(a){return _.filter(this._buffer,a)},reject:function(a){return _.reject(this._buffer,a)},domain:function(a){if(_.isUndefined(this._buffer))return null;a||(a=function(a){return a});var b=this._buffer[0],c=_.max(this._buffer,function(a){return a.next?a.next.timestamp:a.timestamp});return[a(b.timestamp),a(c.next?c.next.timestamp:c.timestamp)]},at:function(a){return this.options.pairing?_.findLast(this._buffer,function(b){return b.timestamp<=a&&a<=b.next.timestamp}):_.findLast(this._buffer,function(b){return b.timestamp==a})},inside:function(a,b){var c="left"==b?_.find:_.findLast;return this.options.pairing?c.call(this,this._buffer,function(b){return a[0]<=b.timestamp&&b.timestamp<=a[1]||b.next&&a[0]<=b.next.timestamp&&b.next.timestamp<=a[1]||b.timestamp<=a[0]&&b.next&&a[1]<=b.next.timestamp}):c.call(this,this._buffer,function(b){return a[0]<=b.timestamp&&b.timestamp<=a[1]})},size:function(){return this._buffer.length},clear:function(){for(;this._buffer.length>0;)this._buffer.pop()},flushBefore:function(a){_.remove(this._buffer,function(b){return this.options.pairing?b.timestamp<=a&&b.next.timestamp<a:b.timestamp<=a},this)}}),a}();var Logger=Debugger.Logger=function(){function a(a,b){return _.template(a,b||{},{interpolate:/\#\{(.+?)\}/g})}var b=function(a){this.__logger=a||console};return _.extend(b.prototype,_.object(_.map(["log","info","warn","debug","error"],function(b){return[b,function(b){return function(){var c=a.apply(this,arguments);_.isFunction(this.__logger[b])&&this.__logger[b](c)}}(b)]}))),b}();Debugger.logger=new Logger(console),Debugger.Events=function(a,b){var c=function(){};return b.extend(c.prototype,a.Events),c}(Backbone,_),_.extend(Debugger,Backbone.Events),Debugger.Connector=function(a){WebSocket||throwError("WebSocket is not supported."),_.isFunction(this.initialize)&&this.initialize(a)},_.extend(Debugger.Connector.prototype,Backbone.Events,{initialize:function(a){this.options=defaultsDeep(a||{},{address:"localhost",port:8987,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:5e3}),this._connectionAttempted=0,this._requestsQueue=[],this._initiate_connection()},requestLiveTrace:function(a){return this._exec({name:"livetrace",args:a})},requestHistoryTrace:function(a){var b=Date.now();return a=_.defaults({},a,{from:b-864e5,to:b,withEventLine:!1,screenResolution:930,selectorResolution:10,brushResolution:930,order:"type"}),this._exec({name:"historytrace",args:a})},requestInitialHistoryTrace:function(a){return this.requestHistoryTrace(defaultsDeep({withEventLine:!0},a))},isPersistent:function(){return this.options.reconnection},tryReconnection:function(){return this.options.reconnection&&this._connectionAttempted<this.options.reconnectionAttempts},_initiate_connection:function(){var a=this;a._connectionAttempted++,this.socket=new WebSocket("ws://"+this.options.address+":"+this.options.port),_.extend(this.socket,{onopen:function(){Debugger.logger.info("Socket opened on #{address}:#{port}",a.options),Debugger.trigger("websocket:open"),a._execLastPendingRequestAndDropOthers()},onerror:function(){Debugger.logger.info("Socket error."),Debugger.trigger("websocket:error")},onclose:function(b){var c=b.code,d=b.reason;1e3!=c?Debugger.logger.error("Socket closed unexpectedly #{reason}[code: #{code}]",{code:c,reason:d?d+" ":""}):Debugger.logger.info("Socket closed.",{code:c,reason:d}),Debugger.trigger("websocket:close"),1e3!=c&&a.isPersistent()&&a.tryReconnection()&&(Debugger.logger.info("Schedule socket reconnection in #{delay}ms (attempt nÂ°#{attempts})",{attempts:a._connectionAttempted,delay:a.options.reconnectionDelay}),setTimeout(function(){a._initiate_connection()},a.options.reconnectionDelay))},onmessage:function(b){try{var c=a._unpackMessage(b.data);a.trigger("packet:received",c)}catch(d){throwError('Skip message "#{message}" due to error #{error}',{message:b,error:d})}}})},_execLastPendingRequestAndDropOthers:function(){if(!_.isEmpty(this._requestsQueue)){var a=_.last(this._requestsQueue);_.forEach(this._requestsQueue,function(a){Debugger.logger.info("Dropping old request #{request} from pending queue",{request:JSON.stringify(a)})}),this._clearRequestsQueue(),this._exec(a)}},_exec:function(a){return this.socket.readyState==WebSocket.OPEN?(Debugger.logger.info("Executing request #{request}",{request:JSON.stringify(a)}),this.socket.send(JSON.stringify(a)),!0):(Debugger.logger.info("Postpone request #{request}",{request:JSON.stringify(a)}),this._requestsQueue.push(a),!1)},_clearRequestsQueue:function(){this._requestsQueue=[]},_unpackMessage:function(a){var b=JSON.parse(a);if(_.isObject(b)&&_.has(b,"request")){var c={request:b.request,data:b.result.data,eventline:b.result.eventline,groups:b.result.groups};return"historytrace"==b.request.name?c.isHistoryTrace=!0:"livetrace"==b.request.name&&(c.isLiveTrace=!0),c}return{isLiveTrace:!0,request:null,data:b,eventline:null,groups:null}},triggerMethod:Debugger.triggerMethod,destroy:function(){var a=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a)),this.triggerMethod.apply(this,["destroy"].concat(a)),this.stopListening(),this.off(),this.socket.close()}}),Debugger.Dashboard=function(a,b){a||throwError("You must specify a selector to create a Dashboard."),_.bindAll(this,"onPacketReceived"),this._groups={},this._devices={},this._programs={},b&&(this._d3_settings=b.d3,delete b.d3),this._domain=[_.now(),0],this._state={},this._mode=Debugger.DASHBOARD_MODE.UNKNOWN,_.isFunction(this.initialize)&&this.initialize(a,b)},Debugger.DASHBOARD_MODE=Object.freeze({LIVE:"live",HISTORY:"history",UNKNOWN:void 0}),_.extend(Debugger.Dashboard.prototype,Backbone.Events,{initialize:function(a,b){this.options=defaultsDeep(b||{},{theme:THEMES_BASIC,i18n:{ns:"debugger"},livetrace:{delayBeforeFlush:1e5},selector:{resolution:30}}),this._init_ui(a),this._init_konami(),this._init_d3(),this._clean()},$:function(a){return this.$el.find(a)},triggerMethod:Debugger.triggerMethod,connect:function(a){return this.connector&&(Debugger.logger.warn("Dashboad connection reinitialized: the dashboad was already connected to a connector."),this.connector.off("packet:received",this.update)),this.connector=a,this.connector.on("packet:received",this.onPacketReceived),this},onPacketReceived:function(a){try{if(!a.isHistoryTrace&&!a.isLiveTrace)throw"Unsupported packet: packet must be of type history or live.";if(a.request)if(a.eventline){this._reset(a.isHistoryTrace?Debugger.DASHBOARD_MODE.HISTORY:Debugger.DASHBOARD_MODE.LIVE);var b=a.eventline.pop();_.each(a.eventline,function(a){this._update_focusline_with_frame(a,{render:!1})},this),b&&this._update_focusline_with_frame(b)}else this._clean();if(a.isHistoryTrace){a.groups&&(this._demux=this._create_demux({grouping:a.groups}));var b=a.data.pop();if(_.each(a.data,function(a){this._update_all_with_frame(a,{render:!1})},this),b&&this._update_all_with_frame(b),b&&b.timestamp<this._focus[1]&&(this._update_focusline_with_frame({timestamp:this._focus[1]}),this._update_all_with_frame({timestamp:this._focus[1]})),a.request.args.focus)switch(a.request.args.focusType){case"id":(this._devices[a.request.args.focus]||this._programs[a.request.args.focus]).markAsFocused(!0);default:Debugger.logger.warn("Only focus by `id` is supported")}}else if(a.isLiveTrace){var c=a.data;if(c instanceof Array&&c.length>0){var b=c.pop();_.each(c,function(a){this._update_focusline_with_frame(a,{render:!1}),this._update_all_with_frame(a,{render:!1})},this),b&&(this._update_focusline_with_frame(b,{live:!0}),this._update_all_with_frame(b,{live:!0})),b&&b.timestamp<this._focus[1]&&(this._update_focusline_with_frame({timestamp:this._focus[1]}),this._update_all_with_frame({timestamp:this._focus[1]}))}else c instanceof Array||(this._update_focusline_with_frame(c,{live:!0}),this._update_all_with_frame(c,{live:!0}))}a.request&&this._toggleLoading(!1),this._notifyWidgetsOfRulerPosition()}catch(d){Debugger.logger.error("Error when processing packet `#{packet}`. #{error} #{stacktrace}",{packet:a,error:d,stacktrace:d.stack})}},requestInitialHistoryTrace:function(a){a=_.defaults({},a,{order:"type",screenResolution:this.options.theme.dashboard.width,selectorResolution:this.options.selector.resolution,brushResolution:this.options.theme.dashboard.width}),this._setState(a),this.connector&&this.connector.requestInitialHistoryTrace(a)},requestHistoryTrace:function(a){a=_.defaults({},a,{order:"type",from:this._domain[0],to:this._domain[1],screenResolution:this._focusline.computed("svg.width"),selectorResolution:this.options.selector.resolution,brushResolution:this._focusline.computed("svg.width")}),this._setState(a),this.connector&&this.connector.requestHistoryTrace(a)},requestLiveTrace:function(a){a=_.defaults({},a,{refreshRate:2e3}),this.connector&&this.connector.requestLiveTrace(a)},mode:function(){return this._mode},isLiveMode:function(){return this._mode==Debugger.DASHBOARD_MODE.LIVE},isHistoryMode:function(){return this._mode==Debugger.DASHBOARD_MODE.HISTORY},_setState:function(a,b){var c,d;if(null==a)return this;"object"==typeof a?d=a:(d={})[a]=b;for(c in d)this._state[c]=d[c]},_delState:function(a){var b;if(null==a)return this;b="object"==typeof a?a:[a];for(a in b)delete this._state[b[a]]},_getState:function(a){return this._state[a]},_getHistoryZoomContext:function(){return _.pick(this._state,["from","to","screenResolution","selectorResolution","brushResolution","order","focus","focusType"])},_init_konami:function(){var a=this;a._konami="38,38,40,40,37,39,37,39,66,65",a._konami_slice=a._konami.split(",").length,a._kkeys=[],window.addEventListener("keydown",function(b){a._kkeys.push(b.keyCode),a._kkeys.toString().indexOf(a._konami)>=0&&$("body").addClass("konami-background"),a._kkeys=a._kkeys.slice(-a._konami_slice)},!0)},_init_ui:function(a){this._$header=$("<header></header>").css({width:parseInt(this.options.theme.dashboard.width)+"px"}),this._$footer=$("<footer></footer>").css({width:parseInt(this.options.theme.dashboard.width)+"px"}),this._$group_container=$('<div class="group-container"></div>').css({width:parseInt(this.options.theme.dashboard.width)+"px"}),this._$container=$('<div class="dashboard-container"></div>').append(this._$group_container),this._$loader=$('<div class="dashboard-loader"><div class="icon-loading"></div> </div>').css({width:parseInt(this.options.theme.dashboard.width)+"px"}),this.$el=$(a).addClass("dashboard").append(this._$header,this._$container,this._$loader,this._$footer),this._create_dashboard_ruler(),this._toggleLoading(!0)},_init_d3:function(){this.timescale=d3.time.scale().range([0,this.options.theme.dashboard.width]),this._d3_settings&&this._d3_settings.locale&&(this._d3_locale=d3.locale(this._d3_settings.locale),d3.time.format=this._d3_locale.timeFormat),this._d3_settings&&this._d3_settings.timeFormatMulti&&(this._d3_timeFormatMulti=d3.time.format.multi(this._d3_settings.timeFormatMulti))},_toggleLoading:function(a){a?(this._$header.hide(),this._$group_container.hide(),this._$loader.show(),this._$footer.hide()):(this._$header.show(),this._$group_container.show(),this._$loader.hide(),this._$footer.show())},_reset:function(a){this._clean(),this._devices={},this._programs={},this._remove_focusline(),this._create_focusline(a),this._domain=[_.now()-this.options.livetrace.delayBeforeFlush,_.now()],this._mode=a},_clean:function(){this._toggleLoading(!0),_.forEach(this._devices,function(a){this._detach_widget(a)},this),_.forEach(this._programs,function(a){this._detach_widget(a)},this),_.forEach(this._groups,function(a){this._remove_group(a)},this),this._groups={},this._demux=this._create_demux({func:"type"})},_onFocusChange:function(){this._notifyWidgetsOnRulerFocusChanged(this._$ruler.position())},_onBrushResize:function(a){this._setState("brushResolution",a),this.triggerMethod.apply(this,["zoom:request"].concat([this._getHistoryZoomContext()]))},_onWidgetMarkerClick:function(a){var b="",c="";_.each(_.sortBy(a,function(a){return parseInt(a.order)}),function(a){b+=a.description+"\n",c+=a.description+"</br>"}),this.triggerMethod.apply(this,["marker:click"].concat([a,b,c]))},_onWidgetFocusRequest:function(a){var b={},c=null;a.focused?(c=a.id,this._delState(["focus","focusType"]),b=_.merge(b,this._getHistoryZoomContext(),{order:"type"})):(c=this._getState("focus"),b=_.merge(b,this._getHistoryZoomContext(),{focus:a.id,focusType:"id",order:"dep"})),c&&(this._devices[c]||this._programs[c]).markAsFocused(!1),this.triggerMethod.apply(this,["eventline:focus:request"].concat([b,a]))},_onWidgetNameClick:function(a){var b=this._getHistoryZoomContext();this.triggerMethod.apply(this,["eventline:name:click"].concat([b,a]))},_notifyWidgetsOfRulerPosition:function(){this._notifyWidgetsOnRulerFocusChanged(this._$ruler.position())},_notifyWidgetsOnRulerFocusChanged:function(a,b){var c=this.options.theme.ruler.width/2,d=Math.max(Math.min((a.left+c)/(this._$ruler.parent().width()-this.options.theme.dashboard.sidebar.width),1),0);_.invoke([this._focusline],"rulerFocusChanged",d,b||"left"),_.invoke(this._devices,"rulerFocusChanged",d,b||"left"),_.invoke(this._programs,"rulerFocusChanged",d,b||"left"),_.invoke(_.pluck(this._groups,"timeline"),"rulerFocusChanged",d,b||"left")},_update_focusline_with_frame:function(a,b){this._domain=b&&b.live?[Math.max(this._domain[0],a.timestamp-this.options.livetrace.delayBeforeFlush),a.timestamp]:[Math.min(this._domain[0],a.timestamp),Math.max(this._domain[1],a.timestamp)],this._focusline.update({timestamp:a.timestamp,frame:{value:a.value?a.value:_.size(a.devices)+_.size(a.programs)}},this._domain,b)},_update_all_with_frame:function(a,b){this._focus=this._focusline.brush.empty()?this._domain:this._focusline.brush.extent();var c=[];_.forEach(a.devices,function(d){this._has_widget("device",d.id)||this._create_widget("device",d),this._update_one_with_frame("device",d.id,{timestamp:a.timestamp,frame:d},b),c.push(d.id)},this),_.forEach(this._devices,function(d,e){_.contains(c,e)||this._update_one_with_frame("device",e,{timestamp:a.timestamp},b)},this);var d=[];_.forEach(a.programs,function(c){this._has_widget("program",c.id)||this._create_widget("program",c),this._update_one_with_frame("program",c.id,{timestamp:a.timestamp,frame:c},b),d.push(c.id)},this),_.forEach(this._programs,function(c,e){_.contains(d,e)||this._update_one_with_frame("program",e,{timestamp:a.timestamp},b)},this),_.forEach(this._groups,function(c){c.timeline.update({timestamp:a.timestamp},this._focus,b)},this)},_update_one_with_frame:function(a,b,c,d){if(this._has_widget(a,b)){var e="device"===a?this._devices[b]:this._programs[b];e.isDetached()&&this._attach_widget_to_group(e),e.update(c,this._focus,d)}},_has_widget:function(a,b){switch(a){case"device":return _.has(this._devices,b);case"program":return _.has(this._programs,b)}},_create_demux:function(a){if(!a||!a.func)return a&&a.grouping?function(){var b=a.grouping;return function(a){var c=_.find(b,function(b){return-1!==_.indexOf(b.members,a.id)});return c?{name:c.name,order:c.order||3}:{name:"Unknown",order:3}}}():function(){return"Unknown"};switch(a.func){case"type":return function(a){return a.type?{name:"Devices",order:2}:{name:"Programs",order:4}};default:return function(){return{name:"Unknown",order:3}}}},_create_focusline:function(a){var b=defaultsDeep({theme:{dashboard:{widget:{height:this.options.theme.focusline.height,margin:this.options.theme.focusline.margin},sidebar:{width:0},aside:{width:0}}},extra:{svg:{innerMargin:{left:this.options.theme.focusline.selector.handle.width,right:this.options.theme.focusline.selector.handle.width}}}},{theme:this.options.theme}),c={id:"default",orientation:"bottom",timeFormat:this._d3_timeFormatMulti,live:a==Debugger.DASHBOARD_MODE.LIVE?!0:!1};this._focusline=new Debugger.Widgets.Focusline(c,b),this.listenTo(this._focusline,"focus:change",this._onFocusChange),this.listenTo(this._focusline,"brush:resize",this._onBrushResize),this._attach_widget(this._focusline,this._$header)},_remove_focusline:function(){this._focusline&&(this._detach_widget(this._focusline),this.stopListening(this._focusline,"focus:change",this._onFocusChange),this.stopListening(this._focusline,"brush:resize",this._onBrushResize),delete this._focusline)},_create_dashboard_ruler:function(){var a=this;this._$ruler=$('<div class="rule"><div class="marker top"></div><div class="line"></div><div class="marker bottom"></div></div>').css({width:this.options.theme.ruler.width,"margin-left":this.options.theme.dashboard.sidebar.width,left:this._$group_container.width()-this.options.theme.dashboard.sidebar.width-this.options.theme.ruler.width/2}),this._$group_container.append(this._$ruler),this._$ruler.draggable({axis:"x",containment:"parent",start:function(a,b){this.lastPosition=b.position},drag:function(b,c){var d=this.lastPosition.left>c.position.left?"left":"right";a._notifyWidgetsOnRulerFocusChanged(c.position,d),this.lastPosition=c.position}})},_remove_dashboard_ruler:function(){this._$ruler.remove(),delete this._$ruler},_create_group:function(a){var b={theme:this.options.theme},c={id:_.uniqueId("timeline"),name:i18n.t(a.name,{ns:this.options.i18n.ns}),orientation:"top",timeFormat:this._d3_timeFormatMulti},d=new Debugger.Widgets.Timeline(c,b);_.isFunction(d.onFocusChange)&&d.listenTo(this._focusline,"focus:change",d.onFocusChange);var e=$("<div/>").attr({id:_.uniqueId("group"),"class":"group","data-name":a.name,"data-order":a.order}).append("<header/>").append('<div class="element-container"></div>');return this._$group_container.append(e),this._$group_container.children().tsort({attr:"data-order"},{attr:"data-name"}),this._attach_widget(d,e.find("header")[0]),{$el:e,$container:e.find(".element-container")[0],timeline:d}},_remove_group:function(a){this._detach_widget(a.timeline),a.$el.remove(),delete a.$el,delete a.$container,delete a.timeline},_create_widget:function(a,b){var c=this,d=void 0,e={theme:this.options.theme},f={id:b.id,focused:b.id==c._getState("focus")};switch(a){case"program":d=new Debugger.Widgets.Program(f,e);break;case"device":switch(f.type=b.type,b.type){case"Temperature":d=new Debugger.Widgets.Temperature(f,e);break;case"Illumination":d=new Debugger.Widgets.Illumination(f,e);break;case"Switch":d=new Debugger.Widgets.Switch(f,e);break;case"Contact":d=new Debugger.Widgets.Contact(f,e);break;case"KeyCardSwitch":d=new Debugger.Widgets.KeycardSwitch(f,e);break;case"SmartPlug":d=new Debugger.Widgets.SmartPlug(f,e);break;case"ColorLight":d=new Debugger.Widgets.ColorLight(f,e);break;case"DomiCube":d=new Debugger.Widgets.DomiCube(f,e);break;case"MediaPlayer":d=new Debugger.Widgets.MediaPlayer(f,e)}}if(d){switch(a){case"device":this._devices[b.id]=d;break;case"program":this._programs[b.id]=d}_.isFunction(d.onFocusChange)&&d.listenTo(this._focusline,"focus:change",d.onFocusChange),this.listenTo(d,"marker:click",this._onWidgetMarkerClick),this.listenTo(d,"eventline:focus:request",this._onWidgetFocusRequest),this.listenTo(d,"eventline:name:click",this._onWidgetNameClick),this._attach_widget_to_group(d)}else Debugger.logger.error("Unable to create instance of type `#{type}` with:\n\n"+JSON.stringify(b),b);return d},_attach_widget_to_group:function(a){var b=this._demux(a.attributes);_.isUndefined(this._groups[b.name])&&(this._groups[b.name]=this._create_group({name:b.name,order:b.order})),this._attach_widget(a,this._groups[b.name].$container)},_attach_widget:function(a,b){this.$(a.el).length>0&&throwError("Widget #{widget} already attached to dashboard.",{widget:a}),b?this.$(b).first().append(a.$el):this._$group_container.append(a.$el),this.triggerMethod.apply(a,["attached"].concat(this.$el))},_detach_widget:function(a){var b=a.$el.parent();this.triggerMethod.apply(a,["detached"].concat(b)),a.$el.detach()}});var Widgets=Debugger.Widgets={};return Widgets.Widget=function(a,b){var c=this;this.attributes=defaultsDeep(a||{},_.result(this,"defaults")),_.forEach(["id","kind"],function(a){_.has(c.attributes,a)||throwError("You must specify some *#{key}* to create a Widget.",{key:a})}),_.bindAll(this),this.exprs={},this.buffer=new Debugger.SmartBuffer(this.attributes.buffer),this.gid=this.attributes.kind+"-"+sluggify(this.attributes.id),_.isFunction(this.initialize)&&this.initialize(b)},Widgets.Widget.extend=Debugger.extend,_.extend(Widgets.Widget.prototype,Backbone.Events,{initialize:function(a){this.options=defaultsDeep({},a,{theme:THEMES_BASIC,extra:{svg:{innerMargin:{top:0,left:0,bottom:0,right:0}}}}),this.compute("svg.width","this.options.theme.dashboard.width - this.options.extra.svg.innerMargin.left - this.options.extra.svg.innerMargin.right - this.options.theme.dashboard.sidebar.width - this.options.theme.dashboard.widget.margin.left - this.options.theme.dashboard.widget.margin.right"),this.compute("svg.height","this.options.theme.dashboard.widget.height - this.options.extra.svg.innerMargin.top - this.options.extra.svg.innerMargin.bottom - this.options.theme.dashboard.widget.margin.top - this.options.theme.dashboard.widget.margin.bottom"),this.compute("widget.height","this.options.theme.dashboard.widget.height - this.options.theme.dashboard.widget.margin.top - this.options.theme.dashboard.widget.margin.bottom"),this._initUI()},onAttached:function(a){this.isAttached=!0,this._initD3(a)},onBeforeInitUI:function(){},_initUI:function(){var a=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:init:UI"].concat(a)),this.$el=$("<div/>").attr({id:this.gid}).addClass("element").css({"margin-top":this.options.theme.dashboard.widget.margin.top,"margin-left":this.options.theme.dashboard.widget.margin.left,"margin-bottom":this.options.theme.dashboard.widget.margin.bottom,"margin-right":this.options.theme.dashboard.widget.margin.right}).append('<div class="placeholder sidebar"></div>').append('<div class="placeholder d3"></div>').append('<div class="placeholder aside"></div>'),this.el=this.$el[0],this._$sidebar=this.$(".placeholder.sidebar").css({width:this.options.theme.dashboard.sidebar.width,height:this.computed("svg.height")+this.options.extra.svg.innerMargin.top+this.options.extra.svg.innerMargin.bottom}),this._$sidemenu=$("<div/>").addClass("menu"),this._$name=$("<div/>").addClass("title").css({"line-height":this.computed("svg.height")+this.options.extra.svg.innerMargin.top+this.options.extra.svg.innerMargin.bottom+"px"}),this._$sidebar.append(this._$sidemenu,this._$name),this._$d3=this.$(".placeholder.d3").css({width:this.computed("svg.width")+this.options.extra.svg.innerMargin.left+this.options.extra.svg.innerMargin.right,height:this.computed("widget.height")}).append(BASE_SVG),this._$aside=this.$(".placeholder.aside").css({height:this.computed("widget.height"),visibility:"hidden"}),this.triggerMethod.apply(this,["init:UI"].concat(a))},onInitUI:function(){},$:function(a){return this.$el.find(a)},onBeforeInitD3:function(){},_initD3:function(){var a=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:init:d3"].concat(a)),this.svg=d3.select(this._$d3[0]).select("svg").attr({width:this.computed("svg.width")+this.options.extra.svg.innerMargin.left+this.options.extra.svg.innerMargin.right,height:this.computed("widget.height")}).append("g").attr("transform","translate("+this.options.extra.svg.innerMargin.left+", "+this.options.extra.svg.innerMargin.top+")"),this.dateFn=function(a){return new Date(a)},this.timescale=d3.time.scale().range([0,this.computed("svg.width")]).clamp(!0),this.triggerMethod.apply(this,["init:d3"].concat(a))},onInitD3:function(){},isDetached:function(){return!this.isAttached},onDetached:function(){Array.prototype.slice.call(arguments);this.isAttached=!1,this._destroyD3()},onBeforeDestroyD3:function(){},_destroyD3:function(){var a=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:destroy:d3"].concat(a)),this.svg.remove(),delete this.svg,this.buffer.clear(),this.triggerMethod.apply(this,["destroy:d3"].concat(a))},onDestroyD3:function(){},onBeforeResetD3:function(){},reset:function(){var a=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:reset:d3"].concat(a)),this._destroyD3(),this._initD3(),this.triggerMethod.apply(this,["reset:d3"].concat(a))},onResetD3:function(){},computed:function(a){return this.exprs[a].value},compute:function(property,expression){return this.exprs[property]={expression:expression,value:eval(expression)},this.exprs[property].value},onBeforeFrameUpdate:function(){},update:function(a,b,c){c=_.defaults({},c,{render:!0});var d=Array.prototype.slice.call([a,b,c]);this.triggerMethod.apply(this,["before:frame:update"].concat(d)),a&&a.bulk?this.buffer.concat(a.bulk):a&&a.timestamp&&this.buffer.push(a.timestamp,a.frame),c&&c.live&&this.buffer.flushBefore(b[0]),this.triggerMethod.apply(this,["frame:update"].concat(d)),c&&c.render&&(this.timescale.domain(b),this._render())},onFrameUpdate:function(){},onBeforeRender:function(){},_render:function(){var a=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:render"].concat(a)),this.triggerMethod.apply(this,["render"].concat(a))},onRender:function(){},onBeforeRulerFocusUpdate:function(){},rulerFocusChanged:function(a,b,c){c=defaultsDeep({},c,{delta:this.options.theme.ruler.lookahead}),this._lastFocusedFrame=this._focusedFrame;var d=this.timescale.invert(this.timescale.range()[1]*a).getTime();this._focusedFrame=this._findFocusedFrame(a,b,d,c.delta),this.triggerMethod.apply(this,["before:ruler:focus:update",a,b,d,this._focusedFrame,this._lastFocusedFrame]),ensure(this._focusedFrame,"data.name")&&this._$name.text(this._focusedFrame.data.name),missing(this._focusedFrame,"data.event.state")?this.$el.css("opacity",this.options.theme.element.inactive.opacity):this.$el.css("opacity",this.options.theme.element.active.opacity),this.triggerMethod.apply(this,["ruler:focus:update",a,b,d,this._focusedFrame,this._lastFocusedFrame])},onRulerFocusUpdate:function(){},_findFocusedFrame:function(a,b,c,d){var e=this.timescale.range()[1]*a,f=this.timescale.invert(parseInt(e-d)).getTime(),g=this.timescale.invert(parseInt(e+d)).getTime(),h=this.buffer.inside(["left"==b?f:c,"right"==b?g:c],b);return h},triggerMethod:Debugger.triggerMethod}),Widgets.Mixins={StateChart:{initD3StateChart:function(){this.state_chart=this.svg.insert("g",".markers").attr({"class":"state area"}).selectAll("rect"),this.state_chart_border=this.svg.insert("path",".markers").attr({"class":"state border"}),this.state_chart_extra=this.svg.insert("line",".markers").attr({"class":"state border pending"})},renderD3StateChart:function(){var a=this,b=this.state_chart=this.state_chart.data(this.buffer.select(function(a){return ensure(a,"data.event.type","update")}),function(a){return a.timestamp});b.enter().append("rect").attr({x:function(b){return a.timescale(a.dateFn(b.timestamp))},y:function(b){return a.computed("svg.height")-a.stateScale(a.stateFn(b.data))},width:function(b){return a.timescale(a.dateFn(b.next.timestamp))-a.timescale(a.dateFn(b.timestamp))},height:function(b){return a.stateScale(a.stateFn(b.data))}}),b.attr({x:function(b){return a.timescale(a.dateFn(b.timestamp))},y:function(b){return a.computed("svg.height")-a.stateScale(a.stateFn(b.data))},width:function(b){return a.timescale(a.dateFn(b.next.timestamp))-a.timescale(a.dateFn(b.timestamp))},height:function(b){return a.stateScale(a.stateFn(b.data))}}),b.exit().remove();var c=d3.svg.line().x(function(b){return a.timescale(a.dateFn(b.timestamp))}).y(function(b){return ensure(b,"data.event.type","update")?a.computed("svg.height")-a.stateScale(a.stateFn(b.data))-a.options.theme.device.state.border.width/2:a.computed("svg.height")+a.options.theme.device.state.border.width}).interpolate("step-after");this.state_chart_border.datum(this.buffer.all(),function(a){return a.timestamp}).attr("d",c);var d=this.buffer.last();d&&this.state_chart_extra.attr({x1:a.timescale(a.dateFn(d.timestamp)),y1:function(){return ensure(d,"data.event.type","update")?a.computed("svg.height")-a.stateScale(a.stateFn(d.data))-a.options.theme.device.state.border.width/2:a.computed("svg.height")+a.options.theme.device.state.border.width},x2:a.timescale(a.dateFn(d.next.timestamp)),y2:function(){return ensure(d,"data.event.type","update")?a.computed("svg.height")-a.stateScale(a.stateFn(d.data))-a.options.theme.device.state.border.width/2:a.computed("svg.height")+a.options.theme.device.state.border.width}})},updateD3StateChartFocus:function(a,b){var c=this.state_chart.data(_.compact([a,b]),function(a){return a.timestamp});c.attr({"class":function(b){return b==a?"focused":""}})},destroyD3StateChart:function(){this.state_chart.remove(),delete this.state_chart,this.state_chart_border.remove(),delete this.state_chart_border,this.state_chart_extra.remove(),delete this.state_chart_extra}},ValueChart:{initD3ValueChart:function(){this.value_chart=this.svg.insert("path",".markers").attr({"class":"value area"}),this.value_chart_border=this.svg.insert("path",".markers").attr({"class":"value border"}),this.value_chart_extra=this.svg.insert("line",".markers").attr({"class":"value border pending"})},renderD3ValueChart:function(){var a=this,b=d3.svg.area().x(function(b){return a.timescale(a.dateFn(b.timestamp))}).y0(function(){return a.computed("svg.height")}).y1(function(b){return a.computed("svg.height")-a.valueScale(a.valueFn(b.data))}).interpolate("cardinal");this.value_chart.datum(this.buffer.select(function(a){return ensure(a,"data.event.type","update")}),function(a){return a.timestamp}).attr("d",b);var c=d3.svg.line().x(function(b){return a.timescale(a.dateFn(b.timestamp))}).y(function(b){return ensure(b,"data.event.type","update")?a.computed("svg.height")-a.valueScale(a.valueFn(b.data))-a.options.theme.device.state.border.width/2:a.computed("svg.height")+a.options.theme.device.state.border.width}).interpolate("cardinal");this.value_chart_border.datum(this.buffer.all(),function(a){return a.timestamp}).attr("d",c);var d=this.buffer.last();d&&this.value_chart_extra.attr({x1:a.timescale(a.dateFn(d.timestamp)),y1:function(){return ensure(d,"data.event.type","update")?a.computed("svg.height")-a.valueScale(a.valueFn(d.data))-a.options.theme.device.state.border.width/2:a.computed("svg.height")+a.options.theme.device.state.border.width},x2:a.timescale(a.dateFn(d.next.timestamp)),y2:function(){return ensure(d,"data.event.type","update")?a.computed("svg.height")-a.valueScale(a.valueFn(d.data))-a.options.theme.device.state.border.width/2:a.computed("svg.height")+a.options.theme.device.state.border.width
}})},updateD3ValueChartFocus:function(){},destroyD3ValueChart:function(){this.value_chart.remove(),delete this.value_chart,this.value_chart_border.remove(),delete this.value_chart_border,this.value_chart_extra.remove(),delete this.value_chart_extra}},Markers:{initD3Markers:function(){this.markers=this.svg.append("g").attr({"class":"markers"}).selectAll(".marker")},renderD3Markers:function(){var a=this,b=this.markers=this.markers.data(this.buffer.reject(function(a){return _.isEmpty(a.data.decorations)}),function(a){return a.timestamp});b.enter().append("g").attr({"class":"marker"}).append("use").attr({"xlink:href":function(a){return a.data.decorations.length>1?"#magnify":"#"+a.data.decorations[0].type},"class":"decoration",transform:"scale("+this.options.theme.pictogram.scale+") translate("+-(this.options.theme.pictogram.dimension.height*this.options.theme.pictogram.scale)/2+","+(this.computed("svg.height")-this.options.theme.pictogram.dimension.height*this.options.theme.pictogram.scale)/2+")"}).on("click",function(b){a.triggerMethod.apply(this,["marker:click"].concat([b.data.decorations]))}),b.attr({transform:function(b){return"translate("+a.timescale(a.dateFn(b.timestamp))+", 0)"}}),b.exit().remove()},destroyD3Markers:function(){this.markers.remove(),delete this.markers}},Aside:{initUIAside:function(){this._$aside.css({height:.6*parseInt(this.computed("widget.height"))+"px","margin-top":.2*parseInt(this.computed("widget.height"))+"px","line-height":.6*parseInt(this.computed("widget.height"))+"px",visibility:"visible"})},updateAsidePosition:function(a,b){var c="left";c=a<this._$aside.width()?"right":a>this.computed("svg.width")-this._$aside.width()?"left":"left"==b?"right":"left",this._$aside.css({left:"right"==c?a+this.options.theme.dashboard.sidebar.width+2*this.options.theme.ruler.width:"auto",right:"right"==c?"auto":this.computed("svg.width")-a})}},Focus:{onFocusChange:function(a){this.timescale.domain(a.empty()?a.x().domain():a.extent()),this._render()}},TimelineGrid:{initD3TimelineGrid:function(){this.xTimelineGridAxis=d3.svg.axis().scale(this.timescale).tickSize(this.computed("svg.height")).orient("bottom").tickFormat(""),this.xTimelineGridAxisGroup=this.svg.insert("g",".markers").append("g").attr({"class":"x grid left"}).call(this.xTimelineGridAxis)},renderTimelineGrid:function(){this.xTimelineGridAxisGroup.call(this.xTimelineGridAxis)},destroyTimelineGrid:function(){this.xTimelineGridAxisGroup.remove(),delete this.xTimelineGridAxisGroup}},EventlineActions:{initUIEventlineActions:function(){var a=this;this._$focusButton=$('<button type="button "></button>"').css({"margin-top":.1*this.computed("widget.height"),height:.8*this.computed("widget.height"),"margin-left":.1*this.computed("widget.height"),width:.8*this.computed("widget.height"),"background-size":.6*this.computed("widget.height")+"px "+.6*this.computed("widget.height")+"px"}).addClass(a.attributes.focused?"picto-focused":"picto-focus").on("click",function(){a.triggerMethod.apply(this,["eventline:focus:request"].concat(a.attributes))}),this._$sidemenu.append(this._$focusButton),this._$name.on("click",function(){a.triggerMethod.apply(this,["eventline:name:click"].concat(a.attributes))}).css({cursor:"pointer"})},markAsFocused:function(a){this.attributes.focused=a,this._$focusButton.addClass(a?"picto-focused":"picto-focus"),this._$focusButton.removeClass(a?"picto-focus":"picto-focused")}}},Widgets.Focusline=Widgets.Widget.extend({defaults:{kind:"focusline",live:!1},onBeforeInitD3:function(){this.floatingTimeFormat=d3.time.format("%H:%M:%S")},onInitD3:function(){Widgets.Widget.prototype.onInitD3.apply(this,arguments);var a=this;this.compute("axis.height","this.options.theme.axis.tick.height + this.options.theme.axis.label.height + this.options.theme.axis.stroke.width"),this.y=d3.scale.linear().range([0,this.computed("svg.height")-this.computed("axis.height")]),this.chart=this.svg.append("g").attr({"class":"focusline"}).selectAll("rect"),this.rulerShadow=this.svg.append("rect").attr({"class":"ruler-shadow",width:this.options.theme.focusline.ruler_shadow.width,height:this.computed("svg.height")-this.computed("axis.height")}),this.focusedTime=this.svg.append("text").attr({y:(this.computed("svg.height")-this.options.theme.focusline.focused_time.label.height)/2,"line-height":this.options.theme.focusline.focused_time.label.height}),this.xAxis=d3.svg.axis().scale(this.timescale).tickSize(this.options.theme.axis.tick.height).orient(this.attributes.orientation),this.attributes.timeFormat&&this.xAxis.tickFormat(this.attributes.timeFormat),this.xAxisGroup=this.svg.append("g").attr({"class":"x axis "+this.attributes.orientation,transform:"translate("+a.options.theme.focusline.selector.handle.width/2+","+(this.computed("svg.height")-this.computed("axis.height")-this.options.theme.axis.stroke.width)+")"}).call(this.xAxis),this.context=this.svg.append("g").attr("class","context"),this.brush=d3.svg.brush().x(this.timescale).on("brush",function(){var b=a.brush.extent(),c=a.timescale(b[1])-a.timescale(b[0]),d=a.options.theme.focusline.selector.min_width,e=a.options.theme.focusline.selector.max_width,f=!1;d&&d>c?(f=!0,a.timescale(b[0])+d>a.computed("svg.width")?(b[1]=a.timescale.invert(a.computed("svg.width")),b[0]=a.timescale.invert(a.computed("svg.width")-d)):b[1]=a.timescale.invert(a.timescale(b[0])+d)):e&&c>e&&(f=!0,b[1]=a.timescale.invert(a.timescale(b[0])+e)),f&&a.brush.extent(b)(d3.select(this)),a.context.select(".mask.left").attr({x:0,width:a.timescale(b[0])}),a.context.select(".mask.right").attr({x:a.timescale(b[1])+a.options.theme.focusline.selector.handle.width,width:a.computed("svg.width")-a.timescale(b[1])}),a.triggerMethod.apply(a,["focus:change"].concat([a.brush]))}).on("brushend",function(){var b=a.brush.empty()?a.brush.x().domain():a.brush.extent(),c=parseInt(a.timescale(b[1])-a.timescale(b[0]));a.triggerMethod.apply(a,["brush:resize"].concat([c]))});var b=this.brushGroup=this.context.append("g").attr("class","x brush").call(this.brush);b.selectAll("rect").attr("y",this.options.theme.focusline.selector.border.width/2).attr("height",this.computed("svg.height")-this.computed("axis.height")-this.options.theme.focusline.selector.border.width),this.brushExtent=this.brushGroup.select("rect.extent"),this.context.selectAll(".brush").append("rect").attr("class","mask left"),this.context.selectAll(".brush").append("rect").attr("class","mask right"),this.context.selectAll(".brush rect.mask").attr({y:this.options.theme.focusline.selector.mask.border.width/2,height:this.computed("svg.height")-this.computed("axis.height")-this.options.theme.focusline.selector.mask.border.width}),this.context.selectAll(".resize").append("rect").attr({"class":"handle",width:a.options.theme.focusline.selector.handle.width,height:this.computed("svg.height")-this.computed("axis.height")});var c=b.on("mousedown.brush");b.on("mousedown.brush",function(){function a(){b.on("mousemove.brush",null),b.on("mouseup.brush",null)}b.on("mouseup.brush",function(){a()}),b.on("mousemove.brush",function(){a(),c.call(this)})}),this._$sidebar.hide(),this._$aside.hide()},onDestroyD3:function(){Widgets.Widget.prototype.onDestroyD3.apply(this,arguments),delete this.y,delete this.xAxis,this.chart.remove(),delete this.chart,this.context.remove(),delete this.context,this.brushGroup.remove(),delete this.brushGroup,delete this.brushExtent,this.xAxisGroup.remove(),delete this.xAxisGroup},onBeforeRender:function(){_.isUndefined(this._isFirstRendering)&&!this.attributes.live&&(this.brush.extent(this.timescale.domain())(this.brushGroup),this._isFirstRendering=!1)},onRender:function(){Widgets.Widget.prototype.onRender.apply(this,arguments);var a=this;this.y.domain(d3.extent(this.buffer.all(),function(a){return a.data.value}));var b=this.chart=this.chart.data(this.buffer.select(function(a){return a.data.value>0}),function(a){return a.timestamp});b.enter().append("rect").attr({x:function(b){return a.timescale(a.dateFn(b.timestamp))},y:function(b){return a.computed("svg.height")-a.computed("axis.height")-a.y(b.data.value)},width:1,height:function(b){return a.y(b.data.value)}}),b.attr({x:function(b){return a.timescale(a.dateFn(b.timestamp))},width:1}),b.exit().remove(),this.xAxisGroup.call(this.xAxis)},rulerFocusChanged:function(a){var b=parseInt(this.brushExtent.attr("x")),c=this.brush.empty()?this.computed("svg.width"):parseInt(this.brushExtent.attr("width")),d=parseInt(this.focusedTime.node().getBBox().width),e=c*a,f=this.timescale.invert(b+e);this.rulerShadow.attr({transform:"translate("+(2*this.options.theme.ruler.width/3+b+e)+", 0)"}),e=0>e-d/2?0:e+d/2>c?c-d:e-d/2+this.options.theme.ruler.width,this.focusedTime.attr({x:b+e}).text(this.floatingTimeFormat(f))}}),Widgets.Timeline=Widgets.Widget.extend({defaults:{kind:"timeline",name:"Timeline",orientation:"top",buffer:{ignoreData:!0}},onInitUI:function(){Widgets.Widget.prototype.onInitUI.apply(this,arguments),this._$name.text(this.attributes.name)},onBeforeInitD3:function(){this.floatingTimeFormat=d3.time.format("%H:%M:%S")},onInitD3:function(){Widgets.Widget.prototype.onInitD3.apply(this,arguments),this.xAxis=d3.svg.axis().scale(this.timescale).orient(this.attributes.orientation),this.attributes.timeFormat&&this.xAxis.tickFormat(this.attributes.timeFormat),this.xAxisGroup=this.svg.append("g").attr({"class":"x axis "+this.attributes.orientation,transform:"translate(0,"+this.computed("svg.height")+")"}).call(this.xAxis),this.focusedTime=this.xAxisGroup.append("text")},onRender:function(){Widgets.Widget.prototype.onRender.apply(this,arguments),this.xAxisGroup.call(this.xAxis)},rulerFocusChanged:function(a){var b,c=this,d=this.timescale.range()[1],e=d*a,f=this.timescale.invert(e);this.focusedTime.text(this.floatingTimeFormat(f));var g=parseInt(this.focusedTime.node().getBBox().width);b=0>e-g/2?0:e+g/2>d?d-g:e-g/2+this.options.theme.ruler.width,this.xAxisGroup.selectAll("text").style("fill-opacity",function(a){return Math.abs(c.timescale(a)-b-g/2)<g?0:1}),this.focusedTime.attr({y:-9,x:b})}}),_.extend(Widgets.Timeline.prototype,Widgets.Mixins.Focus),Widgets.Device=Widgets.Widget.extend({onInitUI:function(){this.initUIEventlineActions(),this._$picto=$("<div/>").addClass("picto").css({height:this.computed("widget.height"),"line-height":this.computed("svg.height")+"px","background-size":this.computed("svg.height")+"px "+this.computed("svg.height")+"px",width:this.computed("svg.height")}),this._$sidebar.append(this._$picto)},onInitD3:function(){Widgets.Widget.prototype.onInitD3.apply(this,arguments),this.status=this.svg.append("g").attr({"class":"status"}).selectAll("line"),this.initD3Markers(),this.initD3TimelineGrid()},onDestroyD3:function(){Widgets.Widget.prototype.onDestroyD3.apply(this,arguments),this.status.remove(),delete this.status,this.destroyD3Markers(),this.destroyTimelineGrid()},onRender:function(){Widgets.Widget.prototype.onRender.apply(this,arguments);var a=this,b=this.status=this.status.data(this.buffer.select(function(a){return ensure(a,"data.event")&&("update"==a.data.event.type||"connection"==a.data.event.type||"disconnection"==a.data.event.type)}),function(a){return a.timestamp});b.enter().append("line").attr({x1:function(b){return a.timescale(a.dateFn(b.timestamp))},y1:this.computed("svg.height")-a.options.theme.status.border.width/2,x2:function(b){return a.timescale(a.dateFn(b.next.timestamp))},y2:this.computed("svg.height")-a.options.theme.status.border.width/2,"class":function(a){return a.data.event.type}}),b.attr({x1:function(b){return a.timescale(a.dateFn(b.timestamp))},x2:function(b){return a.timescale(a.dateFn(b.next.timestamp))},"class":function(a){return a.data.event.type}}),b.exit().remove(),this.renderD3Markers(),this.renderTimelineGrid()},onRulerFocusUpdate:function(a,b,c,d,e){Widgets.Widget.prototype.onRulerFocusUpdate.apply(this,arguments);var f=this.status.data(_.compact([d,e]),function(a){return a.timestamp});f.classed("focused",function(a){return a==d})}}),_.extend(Widgets.Device.prototype,Widgets.Mixins.TimelineGrid,Widgets.Mixins.Markers,Widgets.Mixins.Focus,Widgets.Mixins.EventlineActions),Widgets.Temperature=Widgets.Device.extend({defaults:{kind:"temperature",buffer:{pairing:!0,shadowing:!0}},onInitUI:function(){Widgets.Device.prototype.onInitUI.apply(this,arguments),this.initUIAside()},onBeforeInitD3:function(){Widgets.Device.prototype.onBeforeInitD3.apply(this,arguments),this.stateFn=function(){return!0},this.valueFn=function(a){try{return parseFloat(a.timestamp?a.data.event.state.value:a.event.state.value)}catch(b){return 0}}},onInitD3:function(){Widgets.Device.prototype.onInitD3.apply(this,arguments),this.stateScale=d3.scale.quantize().range([0,this.computed("svg.height")-this.options.theme.device.state.border.width]).domain([!1,!0]),this.valueScale=d3.scale.linear().range([0,this.computed("svg.height")-this.options.theme.device.state.border.width]),this.initD3StateChart(),this.initD3ValueChart()},onDestroyD3:function(){Widgets.Device.prototype.onDestroyD3.apply(this,arguments),delete this.stateScale,delete this.valueScale,this.destroyD3StateChart(),this.destroyD3ValueChart()},onRender:function(){Widgets.Device.prototype.onRender.apply(this,arguments);var a=this;this.valueScale.domain(d3.extent(a.buffer.select(function(a){return ensure(a.data,"event")&&"update"==a.data.event.type}),a.valueFn)),this.renderD3StateChart(),this.renderD3ValueChart()},onRulerFocusUpdate:function(a,b,c,d,e){Widgets.Device.prototype.onRulerFocusUpdate.apply(this,arguments),ensure(d,"data.event.type","update")&&ensure(d,"data.event.picto")?(this._$picto.attr({"class":"picto picto-temperature_state_on"}),this._$aside.text(parseFloat(this.valueFn(d.data)).toFixed(2)+"Â°").css("visibility","visible")):(this._$picto.attr({"class":"picto picto-temperature_type"}).text(""),this._$aside.text("").css("visibility","hidden")),this.updateD3StateChartFocus(d,e),this.updateD3ValueChartFocus(d,e),this.updateAsidePosition(this.timescale.range()[1]*a,b)}}),_.extend(Widgets.Temperature.prototype,Widgets.Mixins.StateChart,Widgets.Mixins.ValueChart,Widgets.Mixins.Focus,Widgets.Mixins.Aside),Widgets.Illumination=Widgets.Device.extend({defaults:{kind:"illumination",buffer:{pairing:!0,shadowing:!0}},onInitUI:function(){Widgets.Device.prototype.onInitUI.apply(this,arguments),this.initUIAside()},onBeforeInitD3:function(){Widgets.Device.prototype.onBeforeInitD3.apply(this,arguments),this.stateFn=function(){return!0},this.valueFn=function(a){try{return parseInt(a.timestamp?a.data.event.state.value:a.event.state.value)}catch(b){return 0}}},onInitD3:function(){Widgets.Device.prototype.onInitD3.apply(this,arguments),this.stateScale=d3.scale.quantize().range([0,this.computed("svg.height")-this.options.theme.device.state.border.width]).domain([!1,!0]),this.valueScale=d3.scale.linear().range([0,this.computed("svg.height")-this.options.theme.device.state.border.width]),this.initD3StateChart(),this.initD3ValueChart()},onDestroyD3:function(){Widgets.Device.prototype.onDestroyD3.apply(this,arguments),delete this.stateScale,delete this.valueScale,this.destroyD3StateChart(),this.destroyD3ValueChart()},onRender:function(){Widgets.Device.prototype.onRender.apply(this,arguments);var a=this,b=d3.extent(a.buffer.select(function(a){return ensure(a.data,"event")&&"update"==a.data.event.type}),a.valueFn);this.valueScale.domain([.9*b[0],1.1*b[1]]),this.renderD3StateChart(),this.renderD3ValueChart()},onRulerFocusUpdate:function(a,b,c,d,e){Widgets.Device.prototype.onRulerFocusUpdate.apply(this,arguments),ensure(d,"data.event.type","update")&&ensure(d,"data.event.picto")?(this._$picto.attr({"class":"picto picto-illumination_state_on"}),this._$aside.text(this.valueFn(d.data)+" Lux").css("visibility","visible")):(this._$picto.attr({"class":"picto picto-illumination_type"}),this._$aside.text("").css("visibility","hidden")),this.updateD3StateChartFocus(d,e),this.updateD3ValueChartFocus(d,e),this.updateAsidePosition(this.timescale.range()[1]*a,b)}}),_.extend(Widgets.Illumination.prototype,Widgets.Mixins.StateChart,Widgets.Mixins.ValueChart,Widgets.Mixins.Focus,Widgets.Mixins.Aside),Widgets.Switch=Widgets.Device.extend({defaults:{kind:"switch",buffer:{pairing:!0,shadowing:!0}},onInitD3:function(){Widgets.Device.prototype.onInitD3.apply(this,arguments),this.stateScale=d3.scale.quantize().range([4,this.computed("svg.height")-this.options.theme.device.state.border.width]).domain([!1,!0]),this.spikes=this.svg.append("g").attr({"class":"spikes"}).selectAll("line"),this.border=this.svg.insert("path",".markers").attr({"class":"state border"}),this.border_extra=this.svg.insert("line",".markers").attr({"class":"state border pending"})},onDestroyD3:function(){Widgets.Device.prototype.onDestroyD3.apply(this,arguments),delete this.stateScale,this.spikes.remove(),delete this.spikes,this.border.remove(),delete this.border,this.border_extra.remove(),delete this.border_extra},onRender:function(){Widgets.Device.prototype.onRender.apply(this,arguments);var a=this,b=this.spikes=this.spikes.data(this.buffer.select(function(a){return ensure(a,"data.event.type","update")}),function(a){return a.timestamp});b.enter().append("line").attr({x1:function(b){return a.timescale(a.dateFn(b.timestamp))},y1:a.stateScale(!1),x2:function(b){return a.timescale(a.dateFn(b.timestamp))},y2:a.stateScale(!0)}),b.attr({x1:function(b){return a.timescale(a.dateFn(b.timestamp))},x2:function(b){return a.timescale(a.dateFn(b.timestamp))}}),b.exit().remove();var c=d3.svg.line().x(function(b){return a.timescale(a.dateFn(b.timestamp))}).y(function(b){return ensure(b,"data.event.type","update")?a.computed("svg.height")-a.options.theme.device.state.border.width/2:a.computed("svg.height")+a.options.theme.device.state.border.width}).interpolate("step-after");this.border.datum(this.buffer.all(),function(a){return a.timestamp}).attr("d",c);var d=this.buffer.last();d&&this.border_extra.attr({x1:a.timescale(a.dateFn(d.timestamp)),y1:function(){return ensure(d,"data.event.type","update")?a.computed("svg.height")-a.options.theme.device.state.border.width/2:a.computed("svg.height")+a.options.theme.device.state.border.width},x2:a.timescale(a.dateFn(d.next.timestamp)),y2:function(){return ensure(d,"data.event.type","update")?a.computed("svg.height")-a.options.theme.device.state.border.width/2:a.computed("svg.height")+a.options.theme.device.state.border.width}})},onRulerFocusUpdate:function(a,b,c,d,e){Widgets.Device.prototype.onRulerFocusUpdate.apply(this,arguments),this._$picto.attr(ensure(d,"data.event.type","update")&&ensure(d,"data.event.picto")?{"class":"picto picto-"+d.data.event.picto}:{"class":"picto picto-switch_type"});var f=this.spikes.data(_.compact([d,e]),function(a){return a.timestamp});f.classed("focused",function(a){return a==d})}}),Widgets.Contact=Widgets.Device.extend({defaults:{kind:"contact",buffer:{pairing:!0,shadowing:!0}},onBeforeInitD3:function(){Widgets.Device.prototype.onBeforeInitD3.apply(this,arguments),this.stateFn=function(a){try{return parseBoolean(a.timestamp?a.data.event.state.value:a.event.state.value)}catch(b){return!1}}},onInitD3:function(){Widgets.Device.prototype.onInitD3.apply(this,arguments),this.stateScale=d3.scale.quantize().range([0,this.computed("svg.height")-this.options.theme.device.state.border.width]).domain([!1,!0]),this.initD3StateChart()},onDestroyD3:function(){Widgets.Device.prototype.onDestroyD3.apply(this,arguments),delete this.stateScale,this.destroyD3StateChart()},onRender:function(){Widgets.Device.prototype.onRender.apply(this,arguments),this.renderD3StateChart()},onRulerFocusUpdate:function(a,b,c,d,e){Widgets.Device.prototype.onRulerFocusUpdate.apply(this,arguments),this._$picto.attr(ensure(d,"data.event.type","update")&&ensure(d,"data.event.picto")?{"class":"picto picto-"+d.data.event.picto}:{"class":"picto picto-contact_type"}),this.updateD3StateChartFocus(d,e)}}),_.extend(Widgets.Contact.prototype,Widgets.Mixins.StateChart),Widgets.KeycardSwitch=Widgets.Device.extend({defaults:{kind:"keycardswitch",buffer:{pairing:!0,shadowing:!0}},onBeforeInitD3:function(){Widgets.Device.prototype.onBeforeInitD3.apply(this,arguments),this.stateFn=function(a){try{return parseBoolean(a.timestamp?a.data.event.state.state:a.event.state.state)}catch(b){return!1}}},onInitD3:function(){Widgets.Device.prototype.onInitD3.apply(this,arguments),this.stateScale=d3.scale.quantize().range([0,this.computed("svg.height")-this.options.theme.device.state.border.width]).domain([!1,!0]),this.initD3StateChart()},onDestroyD3:function(){Widgets.Device.prototype.onDestroyD3.apply(this,arguments),delete this.stateScale,this.destroyD3StateChart()},onRender:function(){Widgets.Device.prototype.onRender.apply(this,arguments),this.renderD3StateChart()},onRulerFocusUpdate:function(a,b,c,d,e){Widgets.Device.prototype.onRulerFocusUpdate.apply(this,arguments),this._$picto.attr(ensure(d,"data.event.type","update")&&ensure(d,"data.event.picto")?{"class":"picto picto-"+d.data.event.picto}:{"class":"picto picto-keycardswitch_type"}),this.updateD3StateChartFocus(d,e)}}),_.extend(Widgets.KeycardSwitch.prototype,Widgets.Mixins.StateChart),Widgets.SmartPlug=Widgets.Device.extend({defaults:{kind:"smartplug",buffer:{pairing:!0,shadowing:!0}},onInitUI:function(){Widgets.Device.prototype.onInitUI.apply(this,arguments),this.initUIAside()},onBeforeInitD3:function(){Widgets.Device.prototype.onBeforeInitD3.apply(this,arguments),this.stateFn=function(){return!0},this.valueFn=function(a){try{return parseInt(a.timestamp?a.data.event.state.consumption:a.event.state.consumption)}catch(b){return 0}}},onInitD3:function(){Widgets.Device.prototype.onInitD3.apply(this,arguments),this.stateScale=d3.scale.quantize().range([0,this.computed("svg.height")-this.options.theme.device.state.border.width]).domain([!1,!0]),this.valueScale=d3.scale.linear().range([0,this.computed("svg.height")-this.options.theme.device.state.border.width]),this.initD3StateChart(),this.initD3ValueChart()},onDestroyD3:function(){Widgets.Device.prototype.onDestroyD3.apply(this,arguments),delete this.stateScale,delete this.valueScale,this.destroyD3StateChart(),this.destroyD3ValueChart()},onRender:function(){Widgets.Device.prototype.onRender.apply(this,arguments);var a=this;this.valueScale.domain(d3.extent(a.buffer.select(function(a){return ensure(a.data,"event")&&"update"==a.data.event.type}),a.valueFn)),this.renderD3StateChart(),this.renderD3ValueChart()},onRulerFocusUpdate:function(a,b,c,d,e){Widgets.Device.prototype.onRulerFocusUpdate.apply(this,arguments),ensure(d,"data.event.type","update")&&ensure(d,"data.event.picto")?(this._$picto.attr({"class":"picto picto-"+d.data.event.picto}),this._$aside.text(this.valueFn(d.data)+" W").css("visibility","visible")):(this._$picto.attr({"class":"picto picto-smartplug_type"}),this._$aside.text("").css("visibility","hidden")),this.updateD3StateChartFocus(d,e),this.updateD3ValueChartFocus(d,e),this.updateAsidePosition(this.timescale.range()[1]*a,b)}}),_.extend(Widgets.SmartPlug.prototype,Widgets.Mixins.StateChart,Widgets.Mixins.ValueChart,Widgets.Mixins.Aside),Widgets.ColorLight=Widgets.Device.extend({defaults:{kind:"colorlight",buffer:{pairing:!0,shadowing:!0}},onBeforeInitD3:function(){Widgets.Device.prototype.onBeforeInitD3.apply(this,arguments),this.stateFn=function(a){try{return parseBoolean(a.timestamp?a.data.event.state.state:a.event.state.state)}catch(b){return!1}},this.colorFn=function(a){try{var b=a.timestamp?a.data.event.state:a.event.state;return d3.hsl(360*Math.max(0,Math.min(parseInt(b.color)/65535,1)),Math.max(0,Math.min(parseInt(b.saturation)/254,1)),Math.max(0,Math.min(parseInt(b.brightness)/254,1)))}catch(c){return d3.hsl(0,0,0)}}},onInitD3:function(){Widgets.Device.prototype.onInitD3.apply(this,arguments),this.stateScale=d3.scale.quantize().range([0,this.computed("svg.height")-this.options.theme.device.state.border.width]).domain([!1,!0]),this.initD3StateChart()},onDestroyD3:function(){Widgets.Device.prototype.onDestroyD3.apply(this,arguments),delete this.stateScale,this.destroyD3StateChart()},onRender:function(){Widgets.Device.prototype.onRender.apply(this,arguments),this.renderD3StateChart()},onRulerFocusUpdate:function(a,b,c,d,e){Widgets.Device.prototype.onRulerFocusUpdate.apply(this,arguments),ensure(d,"data.event.type","update")&&ensure(d,"data.event.picto")?this._$picto.attr({"class":"picto picto-"+d.data.event.picto}).css({"background-color":this.stateFn(d)?this.colorFn(d).toString():"transparent"}):this._$picto.attr({"class":"picto picto-colorlight_type"}).css({"background-color":"transparent"}),this.updateD3StateChartFocus(d,e)}}),_.extend(Widgets.ColorLight.prototype,Widgets.Mixins.StateChart),Widgets.DomiCube=Widgets.Device.extend({defaults:{kind:"domicube",buffer:{pairing:!0,shadowing:!0}},onBeforeInitD3:function(){Widgets.Device.prototype.onBeforeInitD3.apply(this,arguments),this.stateFn=function(){return!0}},onInitD3:function(){Widgets.Device.prototype.onInitD3.apply(this,arguments),this.stateScale=d3.scale.quantize().range([0,this.computed("svg.height")-this.options.theme.device.state.border.width]).domain([!1,!0]),this.initD3StateChart()},onDestroyD3:function(){Widgets.Device.prototype.onDestroyD3.apply(this,arguments),delete this.stateScale,this.destroyD3StateChart()},onRender:function(){Widgets.Device.prototype.onRender.apply(this,arguments);this.renderD3StateChart()},onRulerFocusUpdate:function(a,b,c,d,e){Widgets.Device.prototype.onRulerFocusUpdate.apply(this,arguments),this._$picto.attr(ensure(d,"data.event.type","update")&&ensure(d,"data.event.picto")?{"class":"picto picto-domicube_state_on"}:{"class":"picto picto-domicube_type"}),this.updateD3StateChartFocus(d,e)}}),_.extend(Widgets.DomiCube.prototype,Widgets.Mixins.StateChart,Widgets.Mixins.Focus),Widgets.MediaPlayer=Widgets.Device.extend({defaults:{kind:"mediaplayer",buffer:{pairing:!0,shadowing:!0}},onBeforeInitD3:function(){Widgets.Device.prototype.onBeforeInitD3.apply(this,arguments),this.stateFn=function(){return!0}},onInitD3:function(){Widgets.Device.prototype.onInitD3.apply(this,arguments),this.stateScale=d3.scale.quantize().range([0,this.computed("svg.height")-this.options.theme.device.state.border.width]).domain([!1,!0]),this.initD3StateChart()},onDestroyD3:function(){Widgets.Device.prototype.onDestroyD3.apply(this,arguments),delete this.stateScale,this.destroyD3StateChart()},onRender:function(){Widgets.Device.prototype.onRender.apply(this,arguments);this.renderD3StateChart()},onRulerFocusUpdate:function(a,b,c,d,e){Widgets.Device.prototype.onRulerFocusUpdate.apply(this,arguments),this._$picto.attr(ensure(d,"data.event.type","update")&&ensure(d,"data.event.picto")?{"class":"picto picto-mediaplayer_state_on"}:{"class":"picto picto-mediaplayer_type"}),this.updateD3StateChartFocus(d,e)}}),_.extend(Widgets.MediaPlayer.prototype,Widgets.Mixins.StateChart,Widgets.Mixins.Focus),Widgets.Program=Widgets.Widget.extend({defaults:{kind:"program",buffer:{pairing:!0,shadowing:!0}},onInitUI:function(){this.initUIEventlineActions()},onInitD3:function(){this.state=this.svg.append("g").attr({"class":"program state"}).selectAll("rect"),this.initD3Markers(),this.initD3TimelineGrid()},onRender:function(){Widgets.Widget.prototype.onRender.apply(this,arguments);var a=this,b=this.state=this.state.data(this.buffer.select(function(a){return ensure(a,"data.event")}),function(a){return a.timestamp});b.enter().append("rect").attr({x:function(b){return a.timescale(a.dateFn(b.timestamp))},width:function(b){return a.timescale(a.dateFn(b.next.timestamp))-a.timescale(a.dateFn(b.timestamp))},"class":function(a){return a.data.event.state.name},y:(a.computed("svg.height")-a.options.theme.program.state.height)/2,height:a.options.theme.program.state.height,rx:a.options.theme.program.state.radius.x,ry:a.options.theme.program.state.radius.y}),b.attr({x:function(b){return a.timescale(a.dateFn(b.timestamp))},width:function(b){return a.timescale(a.dateFn(b.next.timestamp))-a.timescale(a.dateFn(b.timestamp))},"class":function(a){return a.data.event.state.name}}),b.exit().remove(),this.renderD3Markers(),this.renderTimelineGrid()},onRulerFocusUpdate:function(a,b,c,d,e){var f=this.state.data(_.compact([d,e]),function(a){return a.timestamp});f.classed("focused",function(a){return a==d})}}),_.extend(Widgets.Program.prototype,Widgets.Mixins.TimelineGrid,Widgets.Mixins.Markers,Widgets.Mixins.Focus,Widgets.Mixins.EventlineActions),Debugger});
//# sourceMappingURL=appsgate.debugger.min.js.map